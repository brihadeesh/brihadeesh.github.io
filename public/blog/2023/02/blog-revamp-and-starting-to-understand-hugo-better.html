<!doctype html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Blog revamp and starting to understand Hugo better</title>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://brihadeesh.github.io/blog/index.xml">
  <link rel="icon" type="image/jpg" href="../../../avatar.jpg">
  
  <link rel="stylesheet" href="../../../main.min.422b4176f1668b88e7f541a9ec6f627b8ad1afea9c669cd8f946bf0920b641d0.css">
  
  <meta property="og:title" content="Blog revamp and starting to understand Hugo better" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://localhost:1313/blog/2023/02/blog-revamp-and-starting-to-understand-hugo-better.html" />
  <meta property="og:image" content="https://peregrinator.site/avatar.jpg" />
  <meta property="og:description" content="I&rsquo;d decided to make the switch to a blogging workflow that I could use
with Emacs back in December and wrote about setting it up from
scratch. Since I wasn&rsquo;t yet acquainted with writing original layout
templates, style-sheets or with organising content into sections in as
simple and sane a manner as I wanted to, I&rsquo;d settled for outsourcing
most of this to a fairly basic theme. Over time, I grew dissatisfied
with how the site looked and how it organised my content and so I
spent some time customising the theme, which took a while to figure
out. I wasn&rsquo;t happy with it still. I then tried changing themes a few
times but couldn&rsquo;t find anything that really worked for me. That I
didn&rsquo;t want any JavaScript I didn&rsquo;t understand, or could understand
for that matter, effectively eliminated a lot of the options I had
considered." />
  <meta property="og:image:alt" content=" " />
  <meta name="fediverse:creator" content="@peregrinator@mastodon.social" />
</head>


<h1>
  Blog revamp and starting to understand Hugo better
  <small>
    <span class="date">February 23, 2023</span>
    on
    <span class="site"><a href="http://localhost:1313/">peregrinator&#39;s blog</a></span>
  </small>
</h1>

<main>
  <article>
    <p>I&rsquo;d decided to make the switch to a blogging workflow that I could use
with Emacs back in December and <a href="../../../blog/2022/12/hugo-org-and-starting-over-at-a-new-blog.html">wrote about</a> setting it up from
scratch. Since I wasn&rsquo;t yet acquainted with writing original layout
templates, style-sheets or with organising content into sections in as
simple and sane a manner as I wanted to, I&rsquo;d settled for outsourcing
most of this to a fairly <a href="https:/github.com/LukasJoswiak/etch">basic theme</a>. Over time, I grew dissatisfied
with how the site looked and how it organised my content and so I
spent some time customising the theme, which took a while to figure
out. I wasn&rsquo;t happy with it still. I then tried changing themes a few
times but couldn&rsquo;t find anything that really worked for me. That I
didn&rsquo;t want any JavaScript I didn&rsquo;t understand, or could understand
for that matter, effectively eliminated a lot of the options I had
considered.</p>
<p>It then dawned on me that I could maybe attempt writing a theme for
myself from (nearly) scratch when I found two themes that seemed to
check out most of my requirements. The first of these was <a href="https://github.com/mavidser/hugo-rocinante/">rocinante</a> by
<a href="https://github.com/mavidser">Sid Verma</a>, a great and adequately minimal theme with added support for
photo albums as posts. My only qualms with it were the somewhat messy
style sheets and cryptic templates that made personalising a bit of an
ordeal. The second, however, was simply genius and it took me close to
no time to figure it out, despite thinking it to be too advanced for
me — there was no theme sub-module and everything was in the home
directory it was from somebody&rsquo;s personal website.</p>
<p>Needless to say, it was Drew DeVault&rsquo;s and I&rsquo;d seen it as something of
an inspiration from the start. A quick glance at <a href="https://drewdevault.com">Drew Devault&rsquo;s blog</a>
should convey what I mean by minimal and functional. I jumped right
into a local clone of his <a href="https://git.sr.ht/~sircmpwn/drewdevault.com">sourcehut repo</a> and got down to making it my
own. I added some minor spice to the `single.html` layout under `blog`
and made an additional few for</p>
<ol>
<li>posts from my Wordpress blog I didn&rsquo;t want listed on the homepage</li>
<li>a section index that listed the above</li>
<li>fiction (just the one post)</li>
<li>an <em>About me</em> page (not a section, unlike before)</li>
<li>the browser friendly copy of my <a href="../../../emacs/literate_emacs_configuration.html">Literate Emacs Configuration</a> with
a table of contents in the sidebar and heading anchors.</li>
</ol>
<p>I realised I didn&rsquo;t want unnecessary taxonomy pages like before or
like those from the rocinante theme and that all my regular blog
posts, Emacs configuration and fiction on the homepage. The prospect
of having to write descriptions for each of these — had I maintained
separate sections for each like before — was daunting, to say the
least.</p>
<p>I also loved the idea of displaying &ldquo;featured posts&rdquo; from the blogs I
follow through Drew&rsquo;s own <a href="https://git.sr.ht/~sircmpwn/openring">openring</a>, written in Go. The only issue I
encountered was with adding this to the Github actions workflows since
it&rsquo;s not as straightforward as the one Sourcehut uses and the absurdly
large number of modules is mind-boggling. Until I find a way of
getting this automated, I&rsquo;ll have to keep at running the command
manually every few days before committing/pushing changes.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">openring <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -s https://drewdevault.com/blog/index.xml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -s https://sourcehut.org/blog/index.xml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -s https://ambikamath.com/feed/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    &lt; webring-in.template <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    &gt; layouts/partials/webring-out.html
</span></span></code></pre></div><p>There were also some issues with date handling in the ox-hugo setup
and I ended up rewriting the org-capture template to allow for entries
into both the main blog section and the miscellaneous one. The capture
template now looks like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="ss">&#39;org-capture</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">org-hugo-new-post-capture</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Returns </span><span class="ss">`org-capture&#39;</span><span class="s"> template string for new Hugo post.
</span></span></span><span class="line"><span class="cl"><span class="s">See </span><span class="ss">`org-capture-templates&#39;</span><span class="s"> for more information.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">let*</span> <span class="p">(</span><span class="c1">;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">date</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="p">(</span><span class="nv">org-time-stamp-format</span> <span class="nb">:long</span> <span class="nb">:inactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">org-current-time</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">title</span> <span class="p">(</span><span class="nf">read-from-minibuffer</span> <span class="s">&#34;Post Title: &#34;</span><span class="p">))</span> <span class="c1">;Prompt to enter the post title</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">fname</span> <span class="p">(</span><span class="nv">org-hugo-slug</span> <span class="nv">title</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">section</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">org-capture-plist</span> <span class="nb">:section</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">lastmod</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">org-capture-alist</span> <span class="nb">:lastmod</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">mapconcat</span> <span class="nf">#&#39;identity</span>
</span></span><span class="line"><span class="cl">                 <span class="o">`</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;* DRAFT &#34;</span> <span class="nv">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;:PROPERTIES:&#34;</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;&#34;</span> <span class="nv">section</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:EXPORT_FILE_NAME: &#34;</span> <span class="nv">fname</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:EXPORT_HUGO_AUTO_SET_LASTMOD: &#34;</span> <span class="nv">lastmod</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="c1">;; Enter current date and time</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:EXPORT_DATE: &#34;</span> <span class="nv">date</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;:END:&#34;</span>
</span></span><span class="line"><span class="cl">                   <span class="c1">;; Place the cursor here finally</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;%?\n&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 <span class="s">&#34;\n&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-capture-templates</span>
</span></span><span class="line"><span class="cl">        <span class="c1">;;`org-capture&#39; binding + h</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;h&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="s">&#34;Hugo blog post&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="nv">entry</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">file+olp</span> <span class="s">&#34;~/my_gits/brihadeesh.github.io/content-org/blog/posts.org&#34;</span> <span class="s">&#34;Posts&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nb">function</span> <span class="nv">org-hugo-new-post-capture</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="nb">:section</span> <span class="s">&#34;:EXPORT_HUGO_SECTION: blog&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="nb">:lastmod</span> <span class="s">&#34;t&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="c1">;; `org-capture&#39; binding + m</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="s">&#34;m&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="s">&#34;Hugo miscellaneous blog post&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="nv">entry</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">file+olp</span> <span class="s">&#34;~/my_gits/brihadeesh.github.io/content-org/blog/posts.org&#34;</span> <span class="s">&#34;Miscellaneous&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nb">function</span> <span class="nv">org-hugo-new-post-capture</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="nb">:section</span> <span class="s">&#34;:EXPORT_HUGO_SECTION: misc&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="nb">:lastmod</span> <span class="s">&#34;f&#34;</span><span class="p">))))</span>
</span></span></code></pre></div><p>That&rsquo;s about it for now. I deliberately kept this brief and avoided
discussing a bunch of tangential points like design choices and the
&ldquo;criteria&rdquo; for making this the best starting point for my blog. I&rsquo;ll
perhaps cover those in later articles.</p>

  </article>

  
</main>

<section class="comment">
  <p class="muted">
    Have a comment on one of my posts? Drop me toot at
    <a href="https://fosstodon.org/@peregrinator">@peregrinator@fosstodon.org</a> or by starting a discussion on
    <a href="https://lists.sr.ht/~peregrinator/public_inbox">my public inbox</a>
    by sending an email to
    <a href="mailto:~peregrinator/public_inbox@lists.sr.ht">~peregrinator/public_inbox@lists.sr.ht</a>.
    Make sure to go through sourcehut <a href="https://man.sr.ht/lists.sr.ht/etiquette.md">mailing list etiquette</a>
    if you haven&#39;t already.
  </p>
</section>


<section class="webring">
  <h2>
    Articles from blogs I follow
  </h2>
  <section class="articles">
    
    <div class="article">
      <h4 class="title">
        <a href="https://drewdevault.com/2023/02/20/2023-02-20-Helios-aarch64.html" target="_blank" rel="noopener">Porting Helios to aarch64 for my FOSDEM talk, part one</a>
      </h4>
      <p class="summary">Helios is a microkernel written in the Hare programming language, and the
subject of a talk I did at FOSDEM earlier this month. You can watch the talk
here if you like:

A while ago I promised someone that I would not do any talks on Helios until I
could prese…</p>
      <small class="source">
        via <a href="https://drewdevault.com">Drew DeVault&#39;s blog</a>
      </small>
      <small class="date">February 20, 2023</small>
    </div>
    
    <div class="article">
      <h4 class="title">
        <a href="https://emersion.fr/blog/2023/status-update-50/" target="_blank" rel="noopener">Status update, February 2023</a>
      </h4>
      <p class="summary">Hi!
Earlier this month I went to FOSDEM with the rest of the SourceHut staff! It was great meeting face-to-face all of the people I work with. I discussed with lots of folks involved in Wayland, IRC, SourceHut and many other interesting projects. This was …</p>
      <small class="source">
        via <a href="https://emersion.fr/blog/">emersion</a>
      </small>
      <small class="date">February 16, 2023</small>
    </div>
    
    <div class="article">
      <h4 class="title">
        <a href="https://sourcehut.org/blog/2023-01-09-gomodulemirror/" target="_blank" rel="noopener">SourceHut will (not) blacklist the Go module mirror</a>
      </h4>
      <p class="summary">Update 2023-01-31: Russ Cox of the Go team reached out to us to address this
problem. After some discussion, an acceptable plan was worked out. The Go team
is working on deploying an update to the “go” tool to add a -reuse flag, which
should substantially re…</p>
      <small class="source">
        via <a href="https://sourcehut.org/blog/">Blogs on Sourcehut</a>
      </small>
      <small class="date">January 9, 2023</small>
    </div>
    
  </section>

  <small class="attribution">
    generated by <a href="https://git.sr.ht/~sircmpwn/openring">openring</a>
  </small>
</section>


<footer>
  <div style="color: transparent">
    <a rel="me" href="https://fosstodon.org/@peregrinator"> </a>
    <a rel="me" href="https://mastodon.social/@peregrinator"> </a>
  </div>
  <br>

  The content for this site is
  <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a>.
  The <a href="https://git.sr.ht/~peregrinator/peregrinator.site">source for this site</a>
  is <a href="https://opensource.org/licenses/MIT">MIT</a>.
</footer>

