<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Literate Emacs Configuration</title>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://brihadeesh.github.io/blog/index.xml">
  <link rel="icon" type="image/jpg" href="../avatar.jpg">
  
  <link rel="stylesheet" href="../main.min.422b4176f1668b88e7f541a9ec6f627b8ad1afea9c669cd8f946bf0920b641d0.css">
</head>



<link rel="stylesheet" href="../nav.min.0fbdf97727e07108a50d9e266b84c87201ffe877b909f204ee822f1261a3428b.css">

<h1>
  Literate Emacs Configuration
  <small>
    <span class="date">Dec 04, 2021</span>
    on
    <span class="site"><a href="https://peregrinator.srht.site/">peregrinator&#39;s blog</a></span>
    / Last updated
    <span class="date">Mar 19, 2023</span>

  </small>
</h1>

<main>
  <article><p>This is a copy of my literate configuration for Emacs and if you&rsquo;re
viewing this anywhere else, don&rsquo;t! Because you can find a readable
version on my <a href="https://peregrinator.srht.site/emacs/literate_emacs_configuration.html">website</a>. You can also find a source-based version with
the rest of my <code>~/.emacs.d</code> on my <a href="https://git.sr.ht/~peregrinator/.emacs.d">sourcehut</a>.</p>
<h2 id="other-init-files"><span class="section-num">1</span> Other init files&nbsp;<a class="hanchor" href="#other-init-files">#</a> </h2>
<p>These are in my <code>~/.emacs.d</code> and help load this main configuration.</p>
<h3 id="early-init"><span class="section-num">1.1</span> Early init&nbsp;<a class="hanchor" href="#early-init">#</a> </h3>
<p>This creates a file, <a href="~/.emacs.d/early-init.el"> <code>early-init.el</code> </a>, in <code>~/.emacs.d</code>. This was stolen
from Protesilaos some time back. It still needs work - it&rsquo;s not
tangled (by default) yet.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;;; early-init.el --- Early Init File -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Copyright (c) 2021-2022 pereginator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Author: peregrinator &lt;brihadeesh@protonmail.com&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; URL: https://git.sr.ht/~peregrinator/dotfiles Version: 0.1.0</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Package-Requires: ((emacs &#34;28.1&#34;))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; This file is NOT part of GNU Emacs.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; This file is free software: you can redistribute it and/or modify</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; it under the terms of the GNU General Public License as published</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; by the Free Software Foundation, either version 3 of the License,</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; or (at your option) any later version.  This file is distributed in</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; the hope that it will be useful, but WITHOUT ANY WARRANTY; without</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; even the implied warranty of MERCHANTABILITY or FITNESS FOR A</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; PARTICULAR PURPOSE.  See the GNU General Public License for more</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; details.  You should have received a copy of the GNU General Public</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; License along with this file.  If not, see</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; &lt;http://www.gnu.org/licenses/&gt;.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Prior to Emacs 27, the `init.el&#39; was supposed to handle the</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; initialisation of the package manager, by means of calling</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; `package-initialize&#39;.  Starting with Emacs 27, the default</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; behaviour is to start the package manager before loading the init</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; file.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;;; Code:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Don&#39;t initialise installed packages cause package.el sucks balls</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">package-enable-at-startup</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Do not resize the frame at this early stage.  (setq</span>
</span></span><span class="line"><span class="cl"><span class="nv">frame-inhibit-implied-resize</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Disable GUI elements ; Disable menu-bar, tool-bar, and scroll-bar.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;(if (fboundp &#39;menu-bar-mode) (menu-bar-mode -1)) (if (fboundp</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;&#39;tool-bar-mode) (tool-bar-mode -1)) (if (fboundp &#39;scroll-bar-mode)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;(scroll-bar-mode -1)) (setq inhibit-splash-screen t) (setq</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;use-dialog-box nil) ; only for mouse events (setq use-file-dialog</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;nil)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-startup-screen</span> <span class="no">t</span><span class="p">)</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-startup-buffer-menu</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; for when I upgrade to emacs28 with native compilation (setq</span>
</span></span><span class="line"><span class="cl"><span class="nv">native-comp-async-report-warnings-errors</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;;; early-init.el ends here</span>
</span></span></code></pre></div><h3 id="init-dot-el"><span class="section-num">1.2</span> init.el&nbsp;<a class="hanchor" href="#init-dot-el">#</a> </h3>
<p>I&rsquo;ve changed things up a little - this now includes the package
management code and the code for <code>org</code> installation.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;; init.el --- Initialization. -*- lexical-binding: t; -*-</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Copyright (C) 2022 peregrinator</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; This file is NOT part of GNU Emacs.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; This file is free software.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Author: peregrinator &lt;brihadeesh@protonmail.com&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; URL: https://git.sr.ht/~peregrinator/.emacs.d</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Package-Requires: ((emacs &#34;28.1&#34;))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; This file provides the initialization configuration.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;; Code:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Make emacs startup faster</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defvar</span> <span class="nv">startup/file-name-handler-alist</span> <span class="nv">file-name-handler-alist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">file-name-handler-alist</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">startup/revert-file-name-handler-alist</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Revert file name handler alist.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">file-name-handler-alist</span> <span class="nv">startup/file-name-handler-alist</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;emacs-startup-hook</span> <span class="ss">&#39;startup/revert-file-name-handler-alist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; For performance</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">read-process-output-max</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))</span> <span class="c1">;; 1mb</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">process-adaptive-read-buffering</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Load newer .elc or .el</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">load-prefer-newer</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="package-management"><span class="section-num">1.2.1</span> Package management&nbsp;<a class="hanchor" href="#package-management">#</a> </h4>
<p>Update: <span class="timestamp-wrapper"><span class="timestamp">&lt;2022-11-21 Mon&gt;</span></span>
I&rsquo;ve moved all of this and some other stuff (garbage collection etc)
to the <code>init.el</code>. See the initial org-mode installation section below
for more.</p>
<h5 id="setup-straight-dot-el"><span class="section-num">1.2.1.1</span> Setup <code>straight.el</code>&nbsp;<a class="hanchor" href="#setup-straight-dot-el">#</a> </h5>
<p>I&rsquo;ll be using <code>use-package</code> to organise and configure individual
packages into neater code blocks although the download will be handled
by <code>straight.el</code>. I&rsquo;ve included the org-installation here since there&rsquo;s somehow always
an issue with version mismatch.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;; Configure `straight.el&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; fetch developmental version of `straight.el&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">straight-repository-branch</span> <span class="s">&#34;develop&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">;; redirect all package repos and builddirs elsewhere</span>
</span></span><span class="line"><span class="cl">      <span class="nv">straight-base-dir</span> <span class="s">&#34;~/.cache/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Bootstrap straight.el</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defvar</span> <span class="nv">bootstrap-version</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">bootstrap-file</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;straight/repos/straight.el/bootstrap.el&#34;</span> <span class="s">&#34;~/.cache&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">bootstrap-version</span> <span class="mi">6</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">bootstrap-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">with-current-buffer</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">url-retrieve-synchronously</span>
</span></span><span class="line"><span class="cl">         <span class="s">&#34;https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="ss">&#39;silent</span> <span class="ss">&#39;inhibit-cookies</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">eval-print-last-sexp</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">load</span> <span class="nv">bootstrap-file</span> <span class="no">nil</span> <span class="ss">&#39;nomessage</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;; Configure straight.el (contd.)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; make all use-package instances use straight.el</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">straight-use-package-by-default</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">;; clone depth (probably to save space)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">straight-vc-git-default-clone-depth</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">;; Define when to check for package modifications,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;; for improved straight.el startup time.</span>
</span></span><span class="line"><span class="cl">      <span class="nv">straight-check-for-modifications</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">;; use elpa</span>
</span></span><span class="line"><span class="cl">      <span class="nv">straight-recipes-gnu-elpa-use-mirror</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nv">straight-host-usernames</span>
</span></span><span class="line"><span class="cl">      <span class="o">&#39;</span><span class="p">((</span><span class="nv">github</span> <span class="o">.</span> <span class="s">&#34;brihadeesh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">gitlab</span> <span class="o">.</span> <span class="s">&#34;peregrinator&#34;</span><span class="p">)))</span>
</span></span></code></pre></div><h5 id="install-and-configure-use-package"><span class="section-num">1.2.1.2</span> Install and configure <code>use-package</code>&nbsp;<a class="hanchor" href="#install-and-configure-use-package">#</a> </h5>
<p><code>use-package</code> is installed and managed by <code>straight.el</code> and in turn
packages used in this config are managed/organized by
<code>use-package</code>. There&rsquo;s something to do with integration with <code>use-package</code>
on the <a href="https://github.com/raxod502/straight.el/blob/develop/README.md#integration-with-use-package">straight.el readme</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Install use-package with straight.el</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">straight-use-package</span> <span class="ss">&#39;use-package</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="use-package-v2-related-changes"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">1.2.1.3</span> Use-package v2 related changes&nbsp;<a class="hanchor" href="#use-package-v2-related-changes">#</a> </h5>
<p>Need to figure this out - I think maybe <code>use-package</code> might not be updated</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">eval-when-compile</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;use-package</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;diminish</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;bind-key</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="minimal-package-dot-el-setup-only-to-browse-packages"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">1.2.1.4</span> Minimal <code>package.el</code> setup only to browse packages&nbsp;<a class="hanchor" href="#minimal-package-dot-el-setup-only-to-browse-packages">#</a> </h5>
<p>Running <code>package-list-packages</code> includes them only for browsing</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;package</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;package-archives</span>
</span></span><span class="line"><span class="cl">             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;melpa&#34;</span> <span class="o">.</span> <span class="s">&#34;https://melpa.org/packages/&#34;</span><span class="p">))</span>
</span></span></code></pre></div><h4 id="initial-org-mode-installation"><span class="section-num">1.2.2</span> Initial Org-mode installation&nbsp;<a class="hanchor" href="#initial-org-mode-installation">#</a> </h4>
<p>I use the latest version of Org, pulled from the <code>gnu-elpa</code> repositories
and have to install it early on so <code>straight.el</code> / <code>use-package</code> don&rsquo;t
give me trouble with version conflicts because it loads the built in
(older) version first.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; install org &amp; org-contrib</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">straight-use-package</span> <span class="ss">&#39;org</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (require &#39;org)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">straight-use-package</span> <span class="ss">&#39;org-contrib</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Load configuration.org</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">file-readable-p</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&#34;configuration.org&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">org-babel-load-file</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&#34;configuration.org&#34;</span><span class="p">)))</span>
</span></span></code></pre></div><h4 id="end"><span class="section-num">1.2.3</span> End&nbsp;<a class="hanchor" href="#end">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;; init.el ends here</span>
</span></span></code></pre></div><h2 id="header"><span class="section-num">2</span> Header&nbsp;<a class="hanchor" href="#header">#</a> </h2>
<p>Just the usual header for elisp files that Emacs keeps complaining
about.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">    <span class="c1">;;; configuration.el --- Initialisation. -*- lexical-binding: t; -*-</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Copyright (C) 2022 peregrinator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Author: peregrinator &lt;brihadeesh@protonmail.com&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; URL: https://git.sr.ht/~peregrinator/.emacs.d</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Package-Requires: ((emacs &#34;28.1&#34;))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; This file is NOT part of GNU Emacs.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; This file is free software: you can redistribute it and/or modify</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; it under the terms of the GNU General Public License as published</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; by the Free Software Foundation, either version 3 of the License,</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; or (at your option) any later version.  This file is distributed in</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; the hope that it will be useful, but WITHOUT ANY WARRANTY; without</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; even the implied warranty of MERCHANTABILITY or FITNESS FOR A</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; PARTICULAR PURPOSE.  See the GNU General Public License for more</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; details.  You should have received a copy of the GNU General Public</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; License along with this file.  If not, see</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; &lt;http://www.gnu.org/licenses/&gt;.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; This file provides the initialization configuration tangled this</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; file.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;;; Code:</span>
</span></span></code></pre></div><h2 id="prerequisites"><span class="section-num">3</span> Prerequisites&nbsp;<a class="hanchor" href="#prerequisites">#</a> </h2>
<h3 id="reload-emacs-configuration"><span class="section-num">3.1</span> Reload Emacs configuration&nbsp;<a class="hanchor" href="#reload-emacs-configuration">#</a> </h3>
<p>I&rsquo;m not sure I understand how this works entirely but <a href="https://github.com/joseph8th/literatemacs#tangle-and-reload">joseph8th&rsquo;s repo</a>
suggests using <code>M-: (load-file user-init-file) RET</code> or evaluating that
same function interactively. I&rsquo;ve modified the sanemacs reload config
function below hoping that it works but in that doesn&rsquo;t happen, this
first code block can be evaluated using <code>C-c C-c</code>:</p>
<p><a id="code-snippet--reload-emacs"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">reload-config</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">load-file</span> <span class="nv">user-init-file</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="ensure-utf-8"><span class="section-num">3.2</span> Ensure UTF-8&nbsp;<a class="hanchor" href="#ensure-utf-8">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-language-environment</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">prefer-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="whoami"><span class="section-num">3.3</span> Whoami&nbsp;<a class="hanchor" href="#whoami">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nf">user-full-name</span> <span class="s">&#34;peregrinator&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="nv">user-mail-address</span> <span class="s">&#34;brihadeesh@protonmail.com&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="writing"><span class="section-num">4</span> Writing&nbsp;<a class="hanchor" href="#writing">#</a> </h2>
<h3 id="org-mode"><span class="section-num">4.1</span> Org-mode&nbsp;<a class="hanchor" href="#org-mode">#</a> </h3>
<ul>
<li><input checked="" disabled="" type="checkbox"> Get the damn thing first</li>
<li><input disabled="" type="checkbox"> Organise the thing - needs splitting into multiple code blocks.</li>
</ul>
<p>Moved the installation to <code>init.el</code> along with the <code>straight.el</code> bootstrap
to avoid conflicts with the bundled version of the package. I think
this can go back to being a regular <code>use-package</code> function but I&rsquo;m
desperately avoiding having to debug init any further.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">initial-major-mode</span> <span class="ss">&#39;org-mode</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-display-inline-images</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-redisplay-inline-images</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-image-actual-width</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-startup-with-inline-images</span> <span class="s">&#34;inlineimages&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-catch-invisible-edits</span> <span class="ss">&#39;smart</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-pretty-entities</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">;; sub-headings inherit properties set at parent level</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;; headings</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-use-property-inheritance</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">;; org-ellipsis &#34; ▾&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;; hide markers for bold, italic, etc and trailing stars</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-hide-emphasis-markers</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">;; fontify code in code blocks</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-src-fontify-natively</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">      <span class="nv">org-fontify-quote-and-verse-blocks</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;; org-src-tab-acts-natively t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-edit-src-content-indentation 2</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-hide-block-startup</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-src-preserve-indentation</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-edit-src-content-indentation</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; allow for increased space between org</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-cycle-separator-lines -1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; hard indentation</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-adapt-indentation t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; increase indentation by using odd header levels only</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-odd-levels-only t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-startup-folded &#39;content</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-capture-bookmark</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-hide-leading-stars</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-modern</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-tags-column</span> <span class="mi">-80</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-ellipsis</span> <span class="s">&#34; ▾&#34;</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-special-ctrl-a/e</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-insert-heading-respect-content t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; display numbers instead of bullets for headings</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-num-mode t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1">;; faster (single-key) navigation in org-mode</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; type `?&#39; for help</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; org-use-speed-commands t</span>
</span></span><span class="line"><span class="cl">     <span class="p">)</span>
</span></span></code></pre></div><h4 id="refile"><span class="section-num">4.1.1</span> Refile&nbsp;<a class="hanchor" href="#refile">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;;(setq org-modules</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  &#39;(org-crypt</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;      org-habit</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;      org-bookmark</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;      org-eshell</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;      org-irc))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-refile-targets</span> <span class="o">&#39;</span><span class="p">((</span><span class="no">nil</span> <span class="nb">:maxlevel</span> <span class="o">.</span> <span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                           <span class="p">(</span><span class="nv">org-agenda-files</span> <span class="nb">:maxlevel</span> <span class="o">.</span> <span class="mi">5</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-outline-path-complete-in-steps</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-refile-use-outline-path</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; get something like this for regular emacs bindings</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;(evil-define-key &#39;(normal insert visual) org-mode-map (kbd &#34;C-j&#34;) &#39;org-next-visible-heading)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;(evil-define-key &#39;(normal insert visual) org-mode-map (kbd &#34;C-k&#34;) &#39;org-previous-visible-heading)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;(evil-define-key &#39;(normal insert visual) org-mode-map (kbd &#34;M-j&#34;) &#39;org-metadown)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;(evil-define-key &#39;(normal insert visual) org-mode-map (kbd &#34;M-k&#34;) &#39;org-metaup)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Replace list hyphen with dot</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (font-lock-add-keywords &#39;org-mode</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;                         &#39;((&#34;^ *\\([-]\\) &#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;                            (0 (prog1 () (compose-region (match-beginning 1) (match-end 1) &#34;•&#34;))))))</span>
</span></span></code></pre></div><h4 id="fixed-pitch-for-everything-code"><span class="section-num">4.1.2</span> Fixed pitch for everything code&nbsp;<a class="hanchor" href="#fixed-pitch-for-everything-code">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Make sure org-indent face is available</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-indent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Ensure that anything that should be fixed-pitch in Org files appears that way</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-block</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="ss">&#39;fixed-pitch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-table</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="ss">&#39;fixed-pitch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-formula</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="ss">&#39;fixed-pitch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-code</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">shadow</span> <span class="nv">fixed-pitch</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-indent</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-hide</span> <span class="nv">fixed-pitch</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-verbatim</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">shadow</span> <span class="nv">fixed-pitch</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-special-keyword</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-comment-face</span> <span class="nv">fixed-pitch</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-meta-line</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-comment-face</span> <span class="nv">fixed-pitch</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;org-checkbox</span> <span class="no">nil</span> <span class="nb">:inherit</span> <span class="ss">&#39;fixed-pitch</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="quick-source-block-templates"><span class="section-num">4.1.3</span> Quick source block templates&nbsp;<a class="hanchor" href="#quick-source-block-templates">#</a> </h4>
<p>These can be run by typing an angle bracket with the shortcut and
hitting <code>&lt;TAB&gt;</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; block templates</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; This is needed as of Org 9.2</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-tempo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;sh&#34;</span> <span class="o">.</span> <span class="s">&#34;src sh&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;el&#34;</span> <span class="o">.</span> <span class="s">&#34;src emacs-lisp&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;li&#34;</span> <span class="o">.</span> <span class="s">&#34;src lisp&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;sc&#34;</span> <span class="o">.</span> <span class="s">&#34;src scheme&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;r&#34;</span> <span class="o">.</span> <span class="s">&#34;src R&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;py&#34;</span> <span class="o">.</span> <span class="s">&#34;src python&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;lua&#34;</span> <span class="o">.</span> <span class="s">&#34;src lua&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;yml&#34;</span> <span class="o">.</span> <span class="s">&#34;src yaml&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;json&#34;</span> <span class="o">.</span> <span class="s">&#34;src json&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;aw&#34;</span> <span class="o">.</span> <span class="s">&#34;src awk&#34;</span><span class="p">))</span>
</span></span></code></pre></div><p>This creates a unique problem wherein the auto-pairing functionality
(<code>electric-pair-mode</code>) creates matching right angle bracket at the end
of the block, messing with Org syntax. This doesn&rsquo;t work as intended
and needs some debugging.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; disable electric pairing for angle bracket</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nb">setq-local</span> <span class="nv">electric-pair-inhibit-predicate</span>
</span></span><span class="line"><span class="cl">                   <span class="o">`</span><span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">char-equal</span> <span class="nv">c</span> <span class="sc">?&lt;</span><span class="p">)</span> <span class="no">t</span> <span class="p">(</span><span class="o">,</span><span class="nv">electric-pair-inhibit-predicate</span> <span class="nv">c</span><span class="p">)))))))</span>
</span></span></code></pre></div><h4 id="babel"><span class="org-todo todo TODO">TODO</span> <span class="section-num">4.1.4</span> Babel&nbsp;<a class="hanchor" href="#babel">#</a> </h4>
<p>This might require <code>org-contrib</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">org-babel-do-load-languages</span>
</span></span><span class="line"><span class="cl">         <span class="ss">&#39;org-babel-load-languages</span>
</span></span><span class="line"><span class="cl">         <span class="o">&#39;</span><span class="p">((</span><span class="nv">emacs-lisp</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">R</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">lisp</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">shell</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">org</span> <span class="o">.</span><span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">awk</span> <span class="o">.</span> <span class="no">t</span><span class="p">)))</span>
</span></span></code></pre></div><h4 id="new-folding-backend"><span class="section-num">4.1.5</span> New folding backend&nbsp;<a class="hanchor" href="#new-folding-backend">#</a> </h4>
<p>This came with the Org 9.6 release on <span class="timestamp-wrapper"><span class="timestamp">&lt;2022-11-29 Tue&gt; </span></span> and I got the
tea from the Org <a href="https://orgmode.org/Changes.html">changes</a> post. This is optimised for files that are
large, and usually more than a few MB in size. I know this file is
only a few kilobytes but I kinda feel it lagging once in a
while. Probably some unrelated issue.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-fold-core-style</span> <span class="ss">&#39;overlays</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="sources-for-agenda-tasks"><span class="org-todo todo TODO">TODO</span> <span class="section-num">4.1.6</span> Sources for agenda tasks&nbsp;<a class="hanchor" href="#sources-for-agenda-tasks">#</a> </h4>
<p>Generates an agenda from wildcarded org files from the specified
directory</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-agenda-files</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">file-expand-wildcards</span> <span class="s">&#34;~/docmuents/denotes/*.org&#34;</span><span class="p">))</span>
</span></span></code></pre></div><h4 id="tags-and-todo-keywords-config"><span class="section-num">4.1.7</span> Tags and todo-keywords config&nbsp;<a class="hanchor" href="#tags-and-todo-keywords-config">#</a> </h4>
<p>Todo-keywords are things like <code>TODO</code> and <code>DONE</code> and so on. Tags are for
classifying stuff by the general theme of what&rsquo;s being talked about.</p>
<h5 id="todo-keywords"><span class="section-num">4.1.7.1</span> todo-keywords&nbsp;<a class="hanchor" href="#todo-keywords">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-todo-keywords</span>
</span></span><span class="line"><span class="cl">      <span class="o">&#39;</span><span class="p">((</span><span class="nv">sequence</span> <span class="s">&#34;TODO(t)&#34;</span> <span class="s">&#34;|&#34;</span> <span class="s">&#34;DISABLED(f)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">sequence</span> <span class="s">&#34;TODO(t)&#34;</span> <span class="s">&#34;|&#34;</span> <span class="s">&#34;CANCELLED(c)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">sequence</span> <span class="s">&#34;DRAFT(e)&#34;</span> <span class="s">&#34;|&#34;</span> <span class="s">&#34;DONE(d)&#34;</span><span class="p">)))</span>
</span></span></code></pre></div><p>Add property drawer disabling source block when <code>TODO</code>-state is
<code>DISABLED</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/autodisable-srcblock-on-disabled</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">when</span>  <span class="p">(</span><span class="nf">equal</span> <span class="p">(</span><span class="nv">org-get-todo-state</span><span class="p">)</span> <span class="s">&#34;DISABLED&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">org-set-property</span> <span class="s">&#34;HEADER_ARGS&#34;</span> <span class="s">&#34;tangle no&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; (org-set-property &#34;VISIBIITY&#34; &#34;folded&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">equal</span> <span class="p">(</span><span class="nv">org-get-todo-state</span><span class="p">)</span> <span class="s">&#34;DISABLED&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">org-delete-property</span> <span class="s">&#34;HEADER_ARGS&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; (org-delete-property &#34;VISIBILITY&#34;)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-after-todo-state-change-hook</span> <span class="ss">&#39;peremacs/autodisable-srcblock-on-disabled</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="tags"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">4.1.7.2</span> tags&nbsp;<a class="hanchor" href="#tags">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-tag-alist</span> <span class="o">&#39;</span><span class="p">(((</span><span class="s">&#34;misc&#34;</span> <span class="o">.</span> <span class="sc">?m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="p">(</span><span class="s">&#34;emacs&#34;</span> <span class="o">.</span> <span class="sc">?e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="p">(</span><span class="s">&#34;dotfiles&#34;</span> <span class="o">.</span> <span class="sc">?d</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="p">(</span><span class="s">&#34;work&#34;</span> <span class="o">.</span> <span class="sc">?w</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="p">(</span><span class="s">&#34;chore&#34;</span> <span class="o">.</span> <span class="sc">?c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="p">(</span><span class="s">&#34;blog&#34;</span> <span class="o">.</span> <span class="sc">?b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="p">)))</span>
</span></span></code></pre></div><h4 id="org-capture-and-agenda"><span class="section-num">4.1.8</span> Org-capture and agenda&nbsp;<a class="hanchor" href="#org-capture-and-agenda">#</a> </h4>
<p>Global keybinding for org-capture</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; (global-set-key (kbd &#34;C-c l&#34;) #&#39;org-store-link)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c a&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">org-agenda</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c c&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">org-capture</span><span class="p">)</span>
</span></span></code></pre></div><p>This will need to be looked at carefully. Roughly, I need to work out
if I&rsquo;m going to be using <code>org-agenda</code> and if so, how will I be using
it. Adding tasks can be made much easier with this. I can also use
this for entering entries into <code>org-journal</code>, making it a whole deal
easier. Perhaps to start off, <a href="https://orgmode.org/worg/org-tutorials/index.html">the org-mode tutorial</a> might be a good
place to start. I&rsquo;ve also got a simple enough config from a reddit
post in my <a href="person_el/sample-org-setup.el">unused local elisp libs</a> too.</p>
<h4 id="em-and-en-dashes"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">4.1.9</span> em- and en-dashes&nbsp;<a class="hanchor" href="#em-and-en-dashes">#</a> </h4>
<p>I realised I use em-dashes a lot — this is perhaps one way to make
sure that em-dashes can be generated with double dashes in sequence. I
actually just use a remapped compose key (<code>R_ALT</code> is remapped to
<code>compose</code>) and <code>compose + ---</code> gives me an em-dash.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Replace two consecutive hyphens with the en-dash</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (add-hook &#39;org-mode-hook (lambda () (push &#39;(&#34;--&#34; . ?–) prettify-symbols-alist)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Replace two consecutive hyphens with the em-dash</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;--&#34;</span> <span class="o">.</span> <span class="sc">?—</span><span class="p">)</span> <span class="nv">prettify-symbols-alist</span><span class="p">)))</span>
</span></span></code></pre></div><h4 id="write-org-log-into-drawer"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">4.1.10</span> Write org-log into drawer&nbsp;<a class="hanchor" href="#write-org-log-into-drawer">#</a> </h4>
<p>Every time I change the TODO-keywords for a heading, there&rsquo;s a list
entry added on top of the text under the heading with a state-change
date stamp and more information. This should ensure such logs should
be entered into a drawer like those that ox-hugo uses.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-log-into-drawer</span> <span class="nv">LOGBOOK</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="backlinks-org-super-links"><span class="section-num">4.1.11</span> Backlinks / org-super-links&nbsp;<a class="hanchor" href="#backlinks-org-super-links">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-super-links</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nv">org-super-links</span> <span class="nb">:type</span> <span class="nv">git</span> <span class="nb">:host</span> <span class="nv">github</span> <span class="nb">:repo</span> <span class="s">&#34;toshism/org-super-links&#34;</span> <span class="nb">:branch</span> <span class="s">&#34;develop&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-c s s&#34;</span> <span class="o">.</span> <span class="nv">org-super-links-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;C-c s l&#34;</span> <span class="o">.</span> <span class="nv">org-super-links-store-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;C-c s C-l&#34;</span> <span class="o">.</span> <span class="nv">org-super-links-insert-link</span><span class="p">)))</span>
</span></span></code></pre></div><h4 id="display-features"><span class="section-num">4.1.12</span> Display features&nbsp;<a class="hanchor" href="#display-features">#</a> </h4>
<p>In the spirit of reclaiming some semblance of organisation in this
file, I&rsquo;ve tried to group settings by the what aspect they
change. Hopefully this continues and the rest of the Org mode
configuration can be split up.</p>
<h5 id="autoindent-autofill-turned-on-automatically"><span class="section-num">4.1.12.1</span> Autoindent/autofill turned on automatically&nbsp;<a class="hanchor" href="#autoindent-autofill-turned-on-automatically">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;org-indent-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-indent-indentation-per-level</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-startup-indented</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; organise paragraphs automatically</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;turn-on-auto-fill</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="minad-s-modern-ui-for-org-mode"><span class="section-num">4.1.12.2</span> Minad&rsquo;s modern UI for org-mode&nbsp;<a class="hanchor" href="#minad-s-modern-ui-for-org-mode">#</a> </h5>
<p>Was maintaining a <a href="https://github.com/brihadeesh/org-modern">fork</a> but I guess it&rsquo;s too much work - should
considering getting back at it sometime. I was having issues with <code>TODO</code>
keywords and tags/categories being rendered absurdly small but
apparently setting <code>org-modern-label-border</code> to nil should make them
full sized (see <a href="https://github.com/minad/org-modern/issues/91">this issue</a>). I really must consider using a
variable-pitch font for rich text and headers while restricting
fixed-pitch fonts to header arguments, source blocks and explicitly
code segments in text.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-modern</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; currently outdated/unmaintained fork</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :straight (:host github :repo &#34;brihadeesh/org-modern&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Add frame borders and window dividers</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">modify-all-frames-parameters</span>
</span></span><span class="line"><span class="cl">   <span class="o">&#39;</span><span class="p">((</span><span class="nv">right-divider-width</span> <span class="o">.</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">internal-border-width</span> <span class="o">.</span> <span class="mi">5</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">face</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">window-divider</span>
</span></span><span class="line"><span class="cl">                  <span class="nv">window-divider-first-pixel</span>
</span></span><span class="line"><span class="cl">                  <span class="nv">window-divider-last-pixel</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">face-spec-reset-face</span> <span class="nv">face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">set-face-foreground</span> <span class="nv">face</span> <span class="p">(</span><span class="nv">face-attribute</span> <span class="ss">&#39;default</span> <span class="nb">:background</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">set-face-background</span> <span class="ss">&#39;fringe</span> <span class="p">(</span><span class="nv">face-attribute</span> <span class="ss">&#39;default</span> <span class="nb">:background</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; `org-modern&#39; specific config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-modern-star</span> <span class="p">[</span><span class="s">&#34;◉ &#34;</span> <span class="s">&#34;○ &#34;</span> <span class="s">&#34;● &#34;</span> <span class="s">&#34;○ &#34;</span> <span class="s">&#34;● &#34;</span> <span class="s">&#34;○ &#34;</span> <span class="s">&#34;● &#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nv">org-modern-label-border</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; enable the global mode</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-org-modern-mode</span> <span class="no">t</span><span class="p">))</span>
</span></span></code></pre></div><h5 id="display-emphasis-markers-on-hover"><span class="section-num">4.1.12.3</span> Display emphasis markers on hover&nbsp;<a class="hanchor" href="#display-emphasis-markers-on-hover">#</a> </h5>
<p>This package makes it much easier to edit Org documents when
org-hide-emphasis-markers is turned on. It temporarily shows the
emphasis markers around certain markup elements when you place your
cursor inside of them. No more fumbling around with = and *
characters!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-appear</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span> <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">org-appear-mode</span><span class="p">))</span>
</span></span></code></pre></div><h5 id="better-commenting-in-org-mode-code-blocks"><span class="section-num">4.1.12.4</span> Better commenting in org-mode code-blocks&nbsp;<a class="hanchor" href="#better-commenting-in-org-mode-code-blocks">#</a> </h5>
<p>Got this from a <a href="https://emacs.stackexchange.com/a/19741/23936">Stack Exchange answer</a> to work around messed up
commenting using the default <code>C-x C-;</code> command. The older/default
command messes up lines, undos, and sometimes comment syntax as well.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; allow comment region in the code edit buffer (according to language)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">my-org-comment-dwim</span> <span class="p">(</span><span class="kp">&amp;optional</span> <span class="nv">arg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;P&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">or</span> <span class="p">(</span><span class="nv">org-babel-do-key-sequence-in-edit-buffer</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;M-;&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">comment-dwim</span> <span class="nv">arg</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; make `C-c C-v C-x M-;&#39; more convenient</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">define-key</span> <span class="nv">org-mode-map</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;M-;&#34;</span><span class="p">)</span> <span class="ss">&#39;my-org-comment-dwim</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="toc-for-org-mode-files"><span class="section-num">4.1.12.5</span> TOC for org-mode files&nbsp;<a class="hanchor" href="#toc-for-org-mode-files">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">toc-org</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:after</span> <span class="nv">org</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:hook</span> <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">toc-org-enable</span><span class="p">))</span>
</span></span></code></pre></div><p>Alternatively</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-make-toc</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span> <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">org-make-toc-mode</span><span class="p">))</span>
</span></span></code></pre></div><h5 id="convert-all-org-keywords-block-identifiers-to-lowercase"><span class="section-num">4.1.12.6</span> Convert all org-keywords/block identifiers to lowercase&nbsp;<a class="hanchor" href="#convert-all-org-keywords-block-identifiers-to-lowercase">#</a> </h5>
<p>It&rsquo;s always nice to see random people online that are crazy like you
and are nice enough to write elisp code for the shit you need. Stolen
from <a href="https://scripter.co/org-keywords-lower-case/">Kaushal Modi</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/lower-case-org-keywords</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Lower case Org keywords and block identifiers.
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">Example: \&#34;#+TITLE\&#34; -&gt; \&#34;#+title\&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">         \&#34;#+BEGIN_EXAMPLE\&#34; -&gt; \&#34;#+begin_example\&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">Inspiration:
</span></span></span><span class="line"><span class="cl"><span class="s">https://code.orgmode.org/bzg/org-mode/commit/13424336a6f30c50952d291e7a82906c1210daf0.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">save-excursion</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">case-fold-search</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">count</span> <span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;; Match examples: &#34;#+foo bar&#34;, &#34;#+foo:&#34;, &#34;=#+foo=&#34;, &#34;~#+foo~&#34;,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;;                 &#34;‘#+foo’&#34;, &#34;“#+foo”&#34;, &#34;,#+foo bar&#34;,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;;                 &#34;#+FOO_bar&lt;eol&gt;&#34;, &#34;#+FOO&lt;eol&gt;&#34;.</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&#34;\\(?1:#\\+[A-Z_]+\\(?:_[[:alpha:]]+\\)*\\)\\(?:[ :=~’”]\\|$\\)&#34;</span> <span class="no">nil</span> <span class="nb">:noerror</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">setq</span> <span class="nv">count</span> <span class="p">(</span><span class="nf">1+</span> <span class="nv">count</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">replace-match</span> <span class="p">(</span><span class="nf">downcase</span> <span class="p">(</span><span class="nv">match-string-no-properties</span> <span class="mi">1</span><span class="p">))</span> <span class="nb">:fixedcase</span> <span class="no">nil</span> <span class="no">nil</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;Lower-cased %d matches&#34;</span> <span class="nv">count</span><span class="p">))))</span>
</span></span></code></pre></div><h3 id="auctex-for-latex-editing-plus-completion"><span class="section-num">4.2</span> AUCTex for LaTex editing + completion&nbsp;<a class="hanchor" href="#auctex-for-latex-editing-plus-completion">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; FIXME:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (use-package auctex</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :init</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (setq TeX-auto-save t)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (setq TeX-parse-self t)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (setq-default TeX-master nil))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">auctex</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:demand</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:no-require</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:mode</span> <span class="p">(</span><span class="s">&#34;\\.tex\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">TeX-latex-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">latex-help-get-cmd-alist</span> <span class="p">()</span>    <span class="c1">;corrected version:</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Scoop up the commands in the index of the latex info manual.
</span></span></span><span class="line"><span class="cl"><span class="s">       The values are saved in </span><span class="ss">`latex-help-cmd-alist&#39;</span><span class="s"> for speed.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; mm, does it contain any cached entries</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;\\begin&#34;</span> <span class="nv">latex-help-cmd-alist</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">save-window-excursion</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nb">setq</span> <span class="nv">latex-help-cmd-alist</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">Info-goto-node</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">latex-help-file</span> <span class="s">&#34;Command Index&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">re-search-backward</span> <span class="s">&#34;^\\* \\(.+\\): *\\(.+\\)\\.&#34;</span> <span class="no">nil</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">key</span> <span class="p">(</span><span class="nf">buffer-substring</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">match-end</span> <span class="mi">1</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">                  <span class="p">(</span><span class="nv">value</span> <span class="p">(</span><span class="nf">buffer-substring</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                                           <span class="p">(</span><span class="nf">match-end</span> <span class="mi">2</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;latex-help-cmd-alist</span> <span class="p">(</span><span class="nf">cons</span> <span class="nv">key</span> <span class="nv">value</span><span class="p">))))))</span>
</span></span><span class="line"><span class="cl">    <span class="nv">latex-help-cmd-alist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;TeX-after-compilation-finished-functions</span>
</span></span><span class="line"><span class="cl">            <span class="nf">#&#39;</span><span class="nv">TeX-revert-document-buffer</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; (use-package company-auctex)</span>
</span></span></code></pre></div><h3 id="spellcheck"><span class="section-num">4.3</span> Spellcheck&nbsp;<a class="hanchor" href="#spellcheck">#</a> </h3>
<h4 id="hunspell"><span class="section-num">4.3.1</span> Hunspell&nbsp;<a class="hanchor" href="#hunspell">#</a> </h4>
<p>Finally figured this out from a <a href="https://redd.it/ahysvb">reddit post from 2019</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; flyspell + aspell??</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ispell-dictionary</span> <span class="s">&#34;en_GB&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ispell-program-name</span> <span class="s">&#34;hunspell&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; below two lines reset the the hunspell to it STOPS querying locale!</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (setq ispell-local-dictionary &#34;en_GB&#34;) ; &#34;en_GB&#34; is key to lookup in `ispell-local-dictionary-alist`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; tell ispell that apostrophes are part of words</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; and select Bristish dictionary</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (setq ispell-local-dictionary-alist</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;             (quote (&#34;UK_English&#34; &#34;[[:alpha:]]&#34; &#34;[^[:alpha:]]&#34; &#34;[&#39;’]&#34; t (&#34;-d&#34; &#34;en_GB&#34;) nil utf-8)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; hook for text mode</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;text-mode-hook</span> <span class="ss">&#39;flyspell-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; hook to check spelling for comments in code</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;prog-mode-hook</span> <span class="ss">&#39;flyspell-prog-mode</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="aspell-based-spellchecking"><span class="section-num">4.3.2</span> Aspell based spellchecking&nbsp;<a class="hanchor" href="#aspell-based-spellchecking">#</a> </h4>
<p>&hellip; because Void linux keeps complaining about not being able to find
a British English dictionary</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ispell-program-name</span> <span class="s">&#34;aspell&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Please note ispell-extra-args contains ACTUAL parameters passed to aspell</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ispell-extra-args</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;--sug-mode=ultra&#34;</span> <span class="s">&#34;--lang=en_GB&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; hook for text mode</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;text-mode-hook</span> <span class="ss">&#39;flyspell-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; hook to check spelling for comments in code</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;prog-mode-hook</span> <span class="ss">&#39;flyspell-prog-mode</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="flyspell-correct-provides-a-more-refines-ui-for-spelling-checking"><span class="section-num">4.3.3</span> flyspell-correct provides a more refines UI for spelling checking&nbsp;<a class="hanchor" href="#flyspell-correct-provides-a-more-refines-ui-for-spelling-checking">#</a> </h4>
<p>This shows a popup like for completions when it finds a misspelled
word which makes it somewhat more accessible when writing, rather than
having to look down at the message area.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">flyspell-correct</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">flyspell</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">flyspell-mode-map</span> <span class="p">(</span><span class="s">&#34;C-;&#34;</span> <span class="o">.</span> <span class="nv">flyspell-correct-wrapper</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">flyspell-correct-popup</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">flyspell-correct</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="something-like-scrivener-from-mac"><span class="section-num">4.4</span> Something like scrivener from Mac&nbsp;<a class="hanchor" href="#something-like-scrivener-from-mac">#</a> </h3>
<p>&hellip;cause I&rsquo;m gonna become a novelist and/or write large books in the
near future</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">binder</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (use-package binder-tutorial)</span>
</span></span></code></pre></div><h3 id="blogging"><span class="section-num">4.5</span> Blogging&nbsp;<a class="hanchor" href="#blogging">#</a> </h3>
<p>I&rsquo;ve defined some stuff necessary to make editing a Hugo website
easier.</p>
<h4 id="ox-hugo-since-the-go-org-keep-wrecking-up-links"><span class="section-num">4.5.1</span> <code>ox-hugo</code> since the go-org keep wrecking up links&nbsp;<a class="hanchor" href="#ox-hugo-since-the-go-org-keep-wrecking-up-links">#</a> </h4>
<p>My personal <a href="https://brihadeesh.github.io">static site</a> was/is written with this. I might have to add
additional setup to add some of this functionality for project pages
but then I hope to eventually move everything to sourcehut or atleast
using it to host a website on my own domain.</p>
<p>This source block continues into the next section.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-hugo</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span>
</span></span></code></pre></div><p>Additional setup for streamlining writing posts on the static site:</p>
<h5 id="blogging-flow"><span class="section-num">4.5.1.1</span> Blogging flow&nbsp;<a class="hanchor" href="#blogging-flow">#</a> </h5>
<p>Based on the capture templates <a href="https://ox-hugo.scripter.co/doc/org-capture-setup/">documentation</a>.</p>
<p>This function is called on invoking the org-capture (see next
section). This particular function adds a date below the header marked
<code>CLOSED</code> which on export to markdown is converted to a regular <code>date</code>
field by ox-hugo and is included in the single page view/posts list on
the final export. It also changes the <code>TODO</code> tag to <code>DONE</code>. I&rsquo;m still
trying to figure out bundles so this might change soon.</p>
<p>Since the provided template runs independent of my git repo for the
website, I&rsquo;ll have to figure out the <code>file</code> variable and how to point it
to the <code>/content-org/blog/posts.org</code> file in the repo. From the original
ox-hugo docs code, this is the first template provided, (from under
the entry variable in the source block below):</p>
<blockquote>
<p>It is assumed that below file is present in <code>org-directory</code> and that
it has a &ldquo;Blog Ideas&rdquo; heading. It can even be a symlink pointing to
the actual location of all-posts.org!</p>
</blockquote>
<p>So I&rsquo;ll change the <code>target</code> to point to my file in the repo directly
until I can assign specific (programmatic ?) definitions for the repo
in this configuration somewhere.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="ss">&#39;org-capture</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">org-hugo-new-post-capture</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Returns </span><span class="ss">`org-capture&#39;</span><span class="s"> template string for new Hugo post.
</span></span></span><span class="line"><span class="cl"><span class="s">See </span><span class="ss">`org-capture-templates&#39;</span><span class="s"> for more information.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">date</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="p">(</span><span class="nv">org-time-stamp-format</span> <span class="nb">:long</span> <span class="nb">:inactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">org-current-time</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">title</span> <span class="p">(</span><span class="nf">read-from-minibuffer</span> <span class="s">&#34;Post Title: &#34;</span><span class="p">))</span> <span class="c1">;Prompt to enter the post title</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">fname</span> <span class="p">(</span><span class="nv">org-hugo-slug</span> <span class="nv">title</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">section</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">org-capture-plist</span> <span class="nb">:section</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">mapconcat</span> <span class="nf">#&#39;identity</span>
</span></span><span class="line"><span class="cl">                 <span class="o">`</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;* DRAFT &#34;</span> <span class="nv">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;:PROPERTIES:&#34;</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;&#34;</span> <span class="nv">section</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:EXPORT_FILE_NAME: &#34;</span> <span class="nv">fname</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="c1">;; ,(concat &#34;:EXPORT_HUGO_AUTO_SET_LASTMOD: &#34; lastmod)</span>
</span></span><span class="line"><span class="cl">                   <span class="c1">;; Enter current date and time</span>
</span></span><span class="line"><span class="cl">                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:EXPORT_DATE: &#34;</span> <span class="nv">date</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;:END:&#34;</span>
</span></span><span class="line"><span class="cl">                   <span class="c1">;; Place the cursor here finally</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;%?\n&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 <span class="s">&#34;\n&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-capture-templates</span>
</span></span><span class="line"><span class="cl">        <span class="c1">;;`org-capture&#39; binding + h</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;b&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="s">&#34;Hugo blog post&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="nv">entry</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">file+olp</span> <span class="s">&#34;~/my_gits/blog/content-org/blog/posts.org&#34;</span> <span class="s">&#34;Posts&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nb">function</span> <span class="nv">org-hugo-new-post-capture</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="nb">:section</span> <span class="s">&#34;:EXPORT_HUGO_SECTION: blog&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="c1">;; `org-capture&#39; binding + m</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="s">&#34;m&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="s">&#34;Hugo miscellaneous blog post&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="nv">entry</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">file+olp</span> <span class="s">&#34;~/my_gits/blog/content-org/blog/posts.org&#34;</span> <span class="s">&#34;Miscellaneous&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nb">function</span> <span class="nv">org-hugo-new-post-capture</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="nb">:section</span> <span class="s">&#34;:EXPORT_HUGO_SECTION: misc&#34;</span>
</span></span><span class="line"><span class="cl">           <span class="p">))))</span>
</span></span></code></pre></div><h3 id="olivetti-distraction-free-writing"><span class="section-num">4.6</span> Olivetti / distraction-free writing&nbsp;<a class="hanchor" href="#olivetti-distraction-free-writing">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">olivetti</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">olivetti-body-width</span> <span class="mf">.67</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">defun</span> <span class="nv">distraction-free</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="s">&#34;Distraction-free writing environment&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">equal</span> <span class="nv">olivetti-mode</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">window-configuration-to-register</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">delete-other-windows</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;; (text-scale-increase 2)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">olivetti-mode</span> <span class="no">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">jump-to-register</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">olivetti-mode</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">text-scale-decrease</span> <span class="mi">2</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">    <span class="p">((</span><span class="s">&#34;&lt;f9&gt;&#34;</span> <span class="o">.</span> <span class="nv">distraction-free</span><span class="p">)))</span>
</span></span></code></pre></div><h2 id="work"><span class="section-num">5</span> Work&nbsp;<a class="hanchor" href="#work">#</a> </h2>
<h3 id="emacs-speaks-statistics-for-r-and-python"><span class="section-num">5.1</span> Emacs Speaks Statistics for <strong>R</strong> and python(?)&nbsp;<a class="hanchor" href="#emacs-speaks-statistics-for-r-and-python">#</a> </h3>
<p>Figure out babel/org-tangle or whatever because Emacs sucks for
RMarkdown and org-mode is generally better (see next bit for RMarkdown)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; :ensure t</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="o">`</span><span class="nv">ess-r-mode</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="polymodes-for-r"><span class="org-todo todo TODO">TODO</span> <span class="section-num">5.1.1</span> Polymodes for R&nbsp;<a class="hanchor" href="#polymodes-for-r">#</a> </h4>
<p>This helps integrate ESS into markdown so editing RMarkdown files is
easy. As an added benefit syntax for regular markdown files is
supported. I won&rsquo;t have to install <code>polymode</code> itself explicitly since
it&rsquo;s a dependency for the <code>poly-R</code> modes and will be pulled
automatically. I do vaguely remember some issues this caused, will
have to</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">poly-R</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.md&#34;</span> <span class="o">.</span> <span class="nv">poly-markdown-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.Rmd&#34;</span> <span class="o">.</span> <span class="nv">poly-markdown+r-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">poly-markdown-mode</span> <span class="o">.</span> <span class="nv">flyspell-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">poly-markdown-mode</span> <span class="o">.</span> <span class="nv">visual-line-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">poly-markdown-mode</span> <span class="o">.</span> <span class="nv">auto-fill-mode</span><span class="p">))</span>
</span></span></code></pre></div><h4 id="defining-org-skeleton-for-org-babel-plus-r"><span class="org-todo todo TODO">TODO</span> <span class="section-num">5.1.2</span> defining org-skeleton for org-babel + R&nbsp;<a class="hanchor" href="#defining-org-skeleton-for-org-babel-plus-r">#</a> </h4>
<p>Got this from <a href="https://orgmode.org/worg/org-contrib/babel/how-to-use-Org-Babel-for-R.html">worg documentation</a> but I vaguely remember reading about
more options for individual source blocks so will have to change /
append accordingly. This defines a skeleton or a format for an org
file header that&rsquo;s specific to writing and running R code. It&rsquo;s bound
to a keybind so it can be accessed easily on opening a fresh org-babel
document.</p>
<p>The other resource was: <a href="https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-R.html">R source blocks in Org Mode</a></p>
<p>More info from the page:</p>
<ol>
<li>The <code>#+INFOJS_OPT</code> option will generate a HTML document that is
foldable and follows the style of GNU/INFO document.</li>
<li>The <code>:session *R*</code> option makes sure all the R code is run in the same
session so objects generated in one code block can be accessed from
other code blocks.</li>
<li>the <code>:cache yes</code> option is used to avoid re-evaluating unchanged code
blocks. This can save significant time when you revise a document
with a lot of R code frequently.</li>
<li>The <code>:results output graphics :exports both</code> option will put both the
R code and its text and graphics output in the generated document.</li>
<li>The <code>:tangle yes</code> option allows the document to be &ldquo;tangled&rdquo; to
generate pure code file. The short-cut key for tangling is <code>C-c C-v t</code>, which generates a .R file with all the R code extracted.</li>
<li>Note the <code>–—</code> string will generate a horizontal line in HTML file.</li>
<li>Finally, a hotkey <code>C-S-f4</code> (while pressing Ctrl and Shift keys, press
F4 key) is assigned to invoke this skeleton quickly.</li>
</ol>
<!--listend-->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">define-skeleton</span> <span class="nv">org-skeleton</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Header info for a emacs-org file.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Title: &#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;#+TITLE:&#34;</span> <span class="nv">str</span> <span class="s">&#34; \n&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;#+AUTHOR: Brihaadeesh S \n&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;#+email: brihadeesh.santharam@gmail.com\n&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;#+INFOJS_OPT: \n&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;#+BABEL: :session *R* :cache yes :results output graphics :exports both :tangle yes \n&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;-----&#34;</span>
</span></span><span class="line"><span class="cl"> <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">[</span><span class="nv">C-S-f4</span><span class="p">]</span> <span class="ss">&#39;org-skeleton</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="org-present-for-presentations"><span class="section-num">5.2</span> org-present for presentations&nbsp;<a class="hanchor" href="#org-present-for-presentations">#</a> </h3>
<p>See <a href="https://github.com/daviwil/dotfiles/blob/9776d65c4486f2fa08ec60a06e86ecb6d2c40085/Emacs.org#presentations">dawiwil&rsquo;s section on this</a> from his literate init for more about
this.</p>
<h3 id="citar-for-reference-management"><span class="org-todo todo TODO">TODO</span> <span class="section-num">5.3</span> Citar for reference management?&nbsp;<a class="hanchor" href="#citar-for-reference-management">#</a> </h3>
<p><a href="https://github.com/bdarcus/citar">Citar</a></p>
<p>If I ever get down to writing papers, of course, I&rsquo;d write them in
<code>org-mode</code> or LaTeX so this should be useful considering <code>Mendeley desktop</code> is bloat and I haven&rsquo;t a clue if FreeBSD even has
<code>Zotero</code>. This has additional setup stuff to do with Embark and the
rest of that family. This particular config only works with
<code>org-mode</code>. Needs a shit ton of work to properly setup.</p>
<p>Also perhaps check out <a href="https://github.com/jkitchin/org-ref">org-ref</a> - it <em>seems a lot
simpler</em>. <a href="https://www.youtube.com/watch?v=2t925KRBbFc">Introduction to org-ref</a> - a video ontroduction</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;;(use-package citar</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;:no-require</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;:custom</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;(org-cite-global-bibliography &#39;(&#34;~/bib/references.bib&#34;))</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;(org-cite-insert-processor &#39;citar)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;(org-cite-follow-processor &#39;citar)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;(org-cite-activate-processor &#39;citar)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; optional: org-cite-insert is also bound to C-c C-x C-@</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;:bind</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;(:map org-mode-map :package org (&#34;C-c b&#34; . #&#39;org-cite-insert)))</span>
</span></span></code></pre></div><h2 id="project-management-and-navigation-projectile"><span class="section-num">6</span> Project management and navigation - projectile&nbsp;<a class="hanchor" href="#project-management-and-navigation-projectile">#</a> </h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; project management</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">projectile</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :ensure t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:demand</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">projectile-completion-system</span> <span class="ss">&#39;default</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind-keymap</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="s">&#34;C-c p&#34;</span> <span class="o">.</span> <span class="nv">projectile-command-map</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :diminish projectile-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">projectile-project-search-path</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;~/my_gits/&#34;</span> <span class="s">&#34;~/journal/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">projectile-mode</span> <span class="mi">+1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; (use-package ibuffer-projectile</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :after ibuffer</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :preface</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (defun my/ibuffer-projectile ()</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;     (ibuffer-projectile-set-filter-groups)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;     (unless (eq ibuffer-sorting-mode &#39;alphabetic)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;       (ibuffer-do-sort-by-alphabetic)))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :hook (ibuffer . my/ibuffer-projectile))</span>
</span></span></code></pre></div><h2 id="denote-for-note-taking"><span class="section-num">7</span> Denote for note-taking&nbsp;<a class="hanchor" href="#denote-for-note-taking">#</a> </h2>
<p>I hope this is considerably simpler than org-roam and easier to
setup. I don&rsquo;t particularly like the way org-roam is unnecessarily
cluttered and excruciatingly tedious to even get started with.</p>
<h3 id="basic-setup"><span class="section-num">7.1</span> Basic setup&nbsp;<a class="hanchor" href="#basic-setup">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">denote</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:source</span> <span class="nv">gnu-elpa-mirror</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Remember to check the doc strings of those variables.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-directory</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/documents/denotes/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; keywords</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-known-keywords</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;emacs&#34;</span> <span class="s">&#34;work&#34;</span> <span class="s">&#34;thoughts&#34;</span> <span class="s">&#34;journal&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; check</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-infer-keywords</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; check</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-sort-keywords</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; Org is the default, set others here</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-file-type</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; entry prompt asks for title and keywords</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-prompts</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">title</span> <span class="nv">keywords</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; Pick dates, where relevant, with Org&#39;s advanced interface:</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-date-prompt-use-org-read-date</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; We allow multi-word keywords by default.  The author&#39;s</span>
</span></span><span class="line"><span class="cl">        <span class="c1">;; personal preference is for single-word keywords for a more</span>
</span></span><span class="line"><span class="cl">        <span class="c1">;; rigid workflow.</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-allow-multi-word-keywords</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; read doc string</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-date-format</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; By default, we fontify backlinks in their bespoke buffer.</span>
</span></span><span class="line"><span class="cl">        <span class="nv">denote-link-fontify-backlinks</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">;; Also see `denote-link-backlinks-display-buffer-action&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">;; which is a bit advanced.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; If you use Markdown or plain text files (Org renders links as buttons</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; right away)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;find-file-hook</span> <span class="nf">#&#39;</span><span class="nv">denote-link-buttonize-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; We use different ways to specify a path for demo purposes.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-dired-directories</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">list</span> <span class="nv">denote-directory</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nv">thread-last</span> <span class="nv">denote-directory</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;attachments&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/documents/denotes/books&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Generic (great if you rename files Denote-style in lots of places):</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (add-hook &#39;dired-mode-hook #&#39;denote-dired-mode)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; OR if only want it in `denote-dired-directories&#39;:</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;dired-mode-hook</span> <span class="nf">#&#39;</span><span class="nv">denote-dired-mode-in-directories</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="keeping-my-org-agenda-updated"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">7.2</span> Keeping my org-agenda updated&nbsp;<a class="hanchor" href="#keeping-my-org-agenda-updated">#</a> </h3>
<p>I&rsquo;ve switched to using denote for managing my notes and tasks and
since I need a reliable system to manage tasks I&rsquo;ve decided to give
<code>org-agenda</code> a go. This should make it easier for me to track tasks from
<code>TODO</code> tagged headers in my denote notes.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defvar</span> <span class="nv">peremacs/denote-to-agenda-regexp</span> <span class="s">&#34;_project&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Denote file names that are added to the agenda.
</span></span></span><span class="line"><span class="cl"><span class="s">  See </span><span class="ss">`my-add-denote-to-agenda&#39;</span><span class="s">.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/denote-add-to-agenda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Add current file to the </span><span class="ss">`org-agenda-files&#39;</span><span class="s">, if needed.
</span></span></span><span class="line"><span class="cl"><span class="s">  The file&#39;s name must match the </span><span class="ss">`peremacs/denote-to-agenda-regexp&#39;</span><span class="s">.
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">  Add this to the </span><span class="ss">`after-save-hook&#39;</span><span class="s"> or call it interactively.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">when-let*</span> <span class="p">((</span><span class="nv">file</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">              <span class="p">((</span><span class="nv">denote-file-is-note-p</span> <span class="nv">file</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">              <span class="p">((</span><span class="nv">string-match-p</span> <span class="nv">peremacs/denote-to-agenda-regexp</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-agenda-files</span> <span class="nv">file</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Example to add the file automatically.  Uncomment it:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; (add-hook &#39;after-save-hook #&#39;my-denote-add-to-agenda)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/denote-remove-from-agenda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Remove current file from the </span><span class="ss">`org-agenda-files&#39;</span><span class="s">.
</span></span></span><span class="line"><span class="cl"><span class="s">  See </span><span class="ss">`peremacs/denote-add-to-agenda&#39;</span><span class="s"> for how to add files to the Org
</span></span></span><span class="line"><span class="cl"><span class="s">  agenda.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">when-let*</span> <span class="p">((</span><span class="nv">file</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">              <span class="p">((</span><span class="nv">string-match-p</span> <span class="nv">peremacs/denote-to-agenda-regexp</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-agenda-files</span> <span class="p">(</span><span class="nf">delete</span> <span class="nv">file</span> <span class="nv">org-agenda-files</span><span class="p">))))</span>
</span></span></code></pre></div><h3 id="denote-templates"><span class="org-todo todo TODO">TODO</span> <span class="section-num">7.3</span> Denote templates&nbsp;<a class="hanchor" href="#denote-templates">#</a> </h3>
<p>This should replace capture templates because the interactive <code>denote</code>
call seems a lot more flexible and versatile. Still WIP</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-templates</span>
</span></span><span class="line"><span class="cl">      <span class="o">`</span><span class="p">((</span><span class="nv">note</span> <span class="o">.</span> <span class="s">&#34;* Some heading\n\n* Another heading&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">memo</span> <span class="o">.</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;* Some heading&#34;</span>
</span></span><span class="line"><span class="cl">                         <span class="s">&#34;\n\n&#34;</span>
</span></span><span class="line"><span class="cl">                         <span class="s">&#34;* Another heading&#34;</span>
</span></span><span class="line"><span class="cl">                         <span class="s">&#34;\n\n&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">journal-entry</span> <span class="o">.</span> <span class="s">&#34;* Date\n\n** Time&#34;</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="journaling-with-denote"><span class="section-num">7.4</span> Journaling with Denote&nbsp;<a class="hanchor" href="#journaling-with-denote">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/denote-journal-entry</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Create an entry tagged &#39;journal&#39; with the date as its title.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">denote</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; format like June 14 2022 Tuesday</span>
</span></span><span class="line"><span class="cl">   <span class="no">nil</span>
</span></span><span class="line"><span class="cl">   <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;journal&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="no">nil</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;~/my_gits/journal/entries/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; multiple keywords are a list of strings: &#39;(&#34;one&#34; &#34;two&#34;)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;* &#34;</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;(%R)&#34;</span><span class="p">)</span> <span class="s">&#34; &#34;</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="convenience-commands-for-journal-entries"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">7.5</span> &ldquo;convenience commands&rdquo; for journal entries&nbsp;<a class="hanchor" href="#convenience-commands-for-journal-entries">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; (defun peremacs/denote-journal-entry ()</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   &#34;Create journal entry and prompt for a subdirectory.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; This is equivalent to calling `denote&#39; when `denote-prompts&#39; is</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; set to &#39;(template subdirectory title keywords).&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (declare (interactive-only t))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (interactive)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (let ((denote-prompts &#39;(subdirectory keywords)))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;     (denote-)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;     (call-interactively #&#39;denote)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/denote-journal-entry</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;Create an entry tagged &#39;journal&#39; with the date as its title.&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">denote</span>
</span></span><span class="line"><span class="cl"> <span class="c1">;; format title like Tuesday 14 June 2022</span>
</span></span><span class="line"><span class="cl"> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%A %e %B %Y&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="c1">;; add &#39;journal&#39; keywords; multiple is a list of strings: &#39;(&#34;one&#34; &#34;two&#34;)</span>
</span></span><span class="line"><span class="cl"> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;journal&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="c1">;; prompt for subdirectory (?)</span>
</span></span><span class="line"><span class="cl"> <span class="p">(</span><span class="nv">denote--subdirectory-prompt</span><span class="p">)))</span>
</span></span></code></pre></div><p>Stolen from somewhere</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">journal-day-exists-p</span> <span class="p">(</span> <span class="nv">target</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;check if journal for a day already exists&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">file-expand-wildcards</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;~/my_gits/journal/entries/&#34;</span> <span class="nv">target</span> <span class="s">&#34;*.org&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">find-previous-journal</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Find most recent journal&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">today</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%Y%m%d&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">all_journals</span> <span class="p">(</span><span class="nf">sort</span> <span class="p">(</span><span class="nf">directory-files</span> <span class="s">&#34;~/my_gits/journal/entries&#34;</span> <span class="no">nil</span> <span class="s">&#34;^[0-9].*.*org$&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">string&gt;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">journal</span> <span class="nv">all_journals</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">string&lt;</span> <span class="p">(</span><span class="nf">substring</span> <span class="nv">journal</span> <span class="mi">0</span> <span class="mi">8</span><span class="p">)</span> <span class="nv">today</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">return</span> <span class="nv">journal</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">my-denote-journal-today</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Create an entry tagged &#39;journal&#39; with the date as its title.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">today</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%Y%m%d&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">filename</span> <span class="p">(</span><span class="nf">car</span> <span class="p">(</span><span class="nv">journal-day-exists-p</span> <span class="nv">today</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">prev</span> <span class="p">(</span><span class="nv">find-previous-journal</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">if</span> <span class="nv">filename</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">find-file</span> <span class="nv">filename</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">denote</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">denote--title-prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="c1">;; (format-time-string &#34;%d %m %Y %a %H:%M&#34;)</span>
</span></span><span class="line"><span class="cl">         <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;journal&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="s">&#34;~/my_gits/journal/entries&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">insert</span> <span class="s">&#34;* &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">save-buffer</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">my-denote-journal-date</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">declare</span> <span class="p">(</span><span class="nv">interactive-only</span> <span class="no">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">date</span> <span class="p">(</span><span class="nv">org-read-date</span> <span class="no">nil</span> <span class="no">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">filename</span> <span class="p">(</span><span class="nf">car</span> <span class="p">(</span><span class="nv">journal-day-exists-p</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%Y%m%d&#34;</span> <span class="nv">date</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">if</span> <span class="nv">filename</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">find-file</span> <span class="nv">filename</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">denote</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">denote--title-prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="c1">;; (format-time-string &#34;%d %m %Y %a %H:%M&#34;)</span>
</span></span><span class="line"><span class="cl">         <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;journal&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="s">&#34;~/my_gits/journal/entries&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">insert</span> <span class="s">&#34;* &#34;</span><span class="p">)))))</span>
</span></span></code></pre></div><h3 id="keybindings"><span class="org-todo todo TODO">TODO</span> <span class="section-num">7.6</span> Keybindings&nbsp;<a class="hanchor" href="#keybindings">#</a> </h3>
<p>Denote DOES NOT define any key bindings. It requires arguments
acceptable to the <code>bind-keys</code> macro. I&rsquo;m not entirely sure some of these
are necessary since I&rsquo;m using a capture template.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; :bind</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; ((&#34;C-c n n&#34; . denote)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n N&#34; . denote-type)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n d&#34; , denote-date)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n s&#34; . denote-subdirectory)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n t&#34; . denote-template)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  ;; renames don&#39;t work with `dired-mode&#39;, hence placed here</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n r&#34; . denote-rename-file)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n R&#34; . denote-rename-file-using-front-matter)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;  ;; org-mode specifics (group with `global-mode-map&#39; for multiple formats</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  ;; or add for each `markdown&#39;/`text&#39;/`org&#39; if using single format)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  :map org-mode-map</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n i&#34; . denote-link) ; &#34;insert&#34; mnemonic</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n I&#34; . denote-link-add-links)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n b&#34; . denote-link-backlinks)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n f f&#34; . denote-link-find-file)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c n f b&#34; . denote-link-find-backlink)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;  ;; specific to dired</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  :map dired-mode-map</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c C-d C-i&#34; . denote-link-dired-marked-notes)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c C-d C-r&#34; . denote-dired-rename-marked-files)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  (&#34;C-c C-d C-R&#34; . denote-dired-rename-marked-files-using-front-matter)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  ;; Also check the commands `denote-link-after-creating&#39;,</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;  ;; `denote-link-or-create&#39;.  You may want to bind them to keys as well.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; )</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><h3 id="org-journal-for-journaling-requirements"><span class="org-todo todo TODO">TODO</span> <span class="section-num">7.7</span> <code>org-journal</code> for journaling requirements&nbsp;<a class="hanchor" href="#org-journal-for-journaling-requirements">#</a> </h3>
<p>This needs better setting up and integration with either <code>Orgzly</code> or
<code>GitJournal</code> for android. iOS seems to have better apps though. Or
just make this workable with the termux version of Emacs.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-journal</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Change default prefix key; needs to be set before loading org-journal</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-journal-prefix-key</span> <span class="s">&#34;C-c j &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; ((&#34;C-c t&#34; . journal-file-today)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;  (&#34;C-c y&#34; . journal-file-yesterday))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Journal directory and files</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-journal-dir</span> <span class="s">&#34;~/journal/entries/&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">org-journal-file-format</span> <span class="s">&#34;%Y%m%d.org&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">org-journal-file-type</span> <span class="ss">&#39;daily</span>
</span></span><span class="line"><span class="cl">        <span class="nv">org-journal-find-file</span> <span class="ss">&#39;find-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Journal file content</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-journal-date-format</span> <span class="s">&#34;%e %b %Y (%A)&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">org-journal-time-format</span> <span class="s">&#34;(%R)&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">org-journal-file-header</span> <span class="s">&#34;#+title: Daily Journal\n#+startup: showeverything&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h2 id="version-control"><span class="section-num">8</span> Version control&nbsp;<a class="hanchor" href="#version-control">#</a> </h2>
<h3 id="git-with-magit-and-gists-with-gist-dot-el"><span class="section-num">8.1</span> Git with Magit and gists with <code>gist.el</code>&nbsp;<a class="hanchor" href="#git-with-magit-and-gists-with-gist-dot-el">#</a> </h3>
<p><a id="code-snippet--magit-config"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">magit</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">(</span><span class="s">&#34;C-x g&#34;</span>    <span class="o">.</span> <span class="nv">magit-status</span><span class="p">))</span>
</span></span></code></pre></div><p><code>gist.el</code> to manage github gists from here</p>
<p><a id="code-snippet--gists-config"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">gist</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="undo-tree"><span class="section-num">8.2</span> Undo tree&nbsp;<a class="hanchor" href="#undo-tree">#</a> </h3>
<p>Helps revert to older versions of files in case I fuck up something
somewhere. Hmm. I doubt I ever use it so disabling it now.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">undo-tree</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">undo-tree-history-directory-alist</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;.&#34;</span> <span class="o">.</span> <span class="s">&#34;~/.emacs.d/undo&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="nv">undo-tree-auto-save-history</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-undo-tree-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span> <span class="nv">undo-tree-mode</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="ssh-for-personal-packages-and-magit"><span class="org-todo todo TODO">TODO</span> <span class="section-num">8.3</span> SSH for personal packages and magit&nbsp;<a class="hanchor" href="#ssh-for-personal-packages-and-magit">#</a> </h3>
<p>This needs a ton of work</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">keychain-environment</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">keychain-refresh-environment</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; ;; import ssh deets from profile</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (use-package exec-path-from-shell</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :config</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (exec-path-from-shell-copy-env &#34;SSH_AGENT_PID&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (exec-path-from-shell-copy-env &#34;SSH_AUTH_SOCK&#34;))</span>
</span></span></code></pre></div><h2 id="minibuffer-completion"><span class="section-num">9</span> Minibuffer completion&nbsp;<a class="hanchor" href="#minibuffer-completion">#</a> </h2>
<h3 id="access-a-list-of-recently-edited-files"><span class="section-num">9.1</span> Access a list of recently edited files&nbsp;<a class="hanchor" href="#access-a-list-of-recently-edited-files">#</a> </h3>
<p>Helps jump back into whatever I was doing before closing Emacs. Or my
laptop more like it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">recentf</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">recentf-max-menu-items</span> <span class="mi">25</span>
</span></span><span class="line"><span class="cl">        <span class="nv">recentf-auto-cleanup</span> <span class="ss">&#39;never</span>
</span></span><span class="line"><span class="cl">        <span class="nv">recentf-keep</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">file-remote-p</span> <span class="nf">file-readable-p</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">recentf-mode</span> <span class="mi">1</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="vertico-for-completions-ui"><span class="section-num">9.2</span> Vertico for completions UI&nbsp;<a class="hanchor" href="#vertico-for-completions-ui">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; Enable vertico</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; pulls extensions as well?</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :straight (:host github :repo &#34;minad/vertico&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">vertico-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; Grow and shrink the Vertico minibuffer</span>
</span></span><span class="line"><span class="cl">   <span class="nv">vertico-resize</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">;; No prefix with number of entries</span>
</span></span><span class="line"><span class="cl">   <span class="nv">vertico-count-format</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">advice-add</span> <span class="nf">#&#39;</span><span class="nv">tmm-add-prompt</span> <span class="nb">:after</span> <span class="nf">#&#39;</span><span class="nv">minibuffer-hide-completions</span><span class="p">)</span>
</span></span></code></pre></div><p>(Continuing from previous block)</p>
<p>Completion-at-point and completion-in-region with Vertico. Use
`consult-completion-in-region&rsquo; if Vertico is enabled. Otherwise use
the default `completion&ndash;in-region&rsquo; function. Disabled because I use
corfu for <code>completion-at-point</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; (setq completion-in-region-function</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;           (lambda (&amp;rest args)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;             (apply (if vertico-mode</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;                        #&#39;consult-completion-in-region</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;                      #&#39;completion--in-region)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;                    args)))</span>
</span></span></code></pre></div><p>Prefix the current candidate (See <a href="https://github.com/minad/vertico/wiki#prefix-current-candidate-with-arrow">relevant section on the wiki</a>)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">minibuffer-format-candidate</span> <span class="p">(</span><span class="nv">orig</span> <span class="nv">cand</span> <span class="nv">prefix</span> <span class="nv">suffix</span> <span class="nv">index</span> <span class="nv">_start</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">prefix</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="nv">vertico--index</span> <span class="nv">index</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="s">&#34;  &#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;   &#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">funcall</span> <span class="nv">orig</span> <span class="nv">cand</span> <span class="nv">prefix</span> <span class="nv">suffix</span> <span class="nv">index</span> <span class="nv">_start</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">advice-add</span> <span class="nf">#&#39;</span><span class="nv">vertico--format-candidate</span>
</span></span><span class="line"><span class="cl">             <span class="nb">:around</span> <span class="nf">#&#39;</span><span class="nv">minibuffer-format-candidate</span><span class="p">)</span>
</span></span></code></pre></div><p>Completions for <code>M-:</code> as well; closes the use-package function started
at Vertico header.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">minibuffer-vertico-setup</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">completion-in-region-function</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">if</span> <span class="nv">vertico-mode</span>
</span></span><span class="line"><span class="cl">            <span class="nf">#&#39;</span><span class="nv">consult-completion-in-region</span>
</span></span><span class="line"><span class="cl">          <span class="nf">#&#39;</span><span class="nv">completion--in-region</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;vertico-mode-hook</span> <span class="nf">#&#39;</span><span class="nv">minibuffer-vertico-setup</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;minibuffer-setup-hook</span> <span class="nf">#&#39;</span><span class="nv">minibuffer-vertico-setup</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><h4 id="vertico-extensions"><span class="org-todo todo TODO">TODO</span> <span class="section-num">9.2.1</span> Vertico extensions&nbsp;<a class="hanchor" href="#vertico-extensions">#</a> </h4>
<p>Again stolen from Karthik Chikmaglur and needs heavy work, hence not enabled</p>
<p><a id="code-snippet--vertico-multiform"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-multiform</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:commands</span> <span class="nv">vertico-multiform-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico-flat</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">vertico-map</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="s">&#34;M-q&#34;</span> <span class="o">.</span> <span class="nv">vertico-multiform-grid</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="s">&#34;C-l&#34;</span> <span class="o">.</span> <span class="nv">vertico-multiform-unobtrusive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="s">&#34;C-M-l&#34;</span> <span class="o">.</span> <span class="nv">embark-export</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span> <span class="p">(</span><span class="nv">vertico-multiform-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-multiform-categories</span>
</span></span><span class="line"><span class="cl">         <span class="o">&#39;</span><span class="p">((</span><span class="nv">file</span> <span class="nv">my/vertico-grid-mode</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">project-file</span> <span class="nv">my/vertico-grid-mode</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">imenu</span> <span class="nv">buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">consult-location</span> <span class="nv">buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">consult-grep</span> <span class="nv">buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">notmuch-result</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">minor-mode</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">reftex-label</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">bib-reference</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">xref-location</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="no">t</span> <span class="nv">unobtrusive</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-multiform-commands</span>
</span></span><span class="line"><span class="cl">         <span class="o">&#39;</span><span class="p">((</span><span class="nv">load-theme</span> <span class="nv">my/vertico-grid-mode</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">my/toggle-theme</span> <span class="nv">my/vertico-grid-mode</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">consult-dir-maybe</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">consult-dir</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">consult-history</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">consult-completion-in-region</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">completion-at-point</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">org-roam-node-find</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">embark-completing-read-prompter</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">embark-act-with-completing-read</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">embark-prefix-help-command</span> <span class="nf">reverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">tmm-menubar</span> <span class="nf">reverse</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">defun</span> <span class="nv">vertico-multiform-unobtrusive</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">     <span class="s">&#34;Toggle the quiet display.&#34;</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">vertico-multiform--display-toggle</span> <span class="ss">&#39;vertico-unobtrusive-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">if</span> <span class="nv">vertico-unobtrusive-mode</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">vertico-multiform--temporary-mode</span> <span class="ss">&#39;vertico-reverse-mode</span> <span class="mi">-1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nv">vertico-multiform--temporary-mode</span> <span class="ss">&#39;vertico-reverse-mode</span> <span class="mi">1</span><span class="p">))))</span>
</span></span></code></pre></div><p><a id="code-snippet--vertico-unobtrusive"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-unobtrusive</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/.local/share/git/vertico/extensions/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico-flat</span><span class="p">)</span>
</span></span></code></pre></div><p>#+name vertico-grid</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-grid</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :bind (:map vertico-map (&#34;M-q&#34; . vertico-grid-mode))</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">my/vertico-count-orig</span> <span class="nv">vertico-count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">define-minor-mode</span> <span class="nv">my/vertico-grid-mode</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Vertico-grid display with modified row count.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:global</span> <span class="no">t</span> <span class="nb">:group</span> <span class="ss">&#39;vertico</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">cond</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">my/vertico-grid-mode</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">setq</span> <span class="nv">my/vertico-count-orig</span> <span class="nv">vertico-count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-count</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">vertico-grid-mode</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="no">t</span> <span class="p">(</span><span class="nv">vertico-grid-mode</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-count</span> <span class="nv">my/vertico-count-orig</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-grid-separator</span> <span class="s">&#34;    &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-grid-lookahead</span> <span class="mi">50</span><span class="p">))</span>
</span></span></code></pre></div><p><a id="code-snippet--vertico-quick"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-quick</span>
</span></span><span class="line"><span class="cl">      <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="nb">:after</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">      <span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">vertico-map</span>
</span></span><span class="line"><span class="cl">             <span class="p">(</span><span class="s">&#34;M-i&#34;</span> <span class="o">.</span> <span class="nv">vertico-quick-insert</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">             <span class="p">(</span><span class="s">&#34;C-&#39;&#34;</span> <span class="o">.</span> <span class="nv">vertico-quick-exit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">             <span class="p">(</span><span class="s">&#34;C-o&#34;</span> <span class="o">.</span> <span class="nv">vertico-quick-embark</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">defun</span> <span class="nv">vertico-quick-embark</span> <span class="p">(</span><span class="kp">&amp;optional</span> <span class="nv">arg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;Embark on candidate using quick keys.&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">vertico-quick-jump</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">embark-act</span> <span class="nv">arg</span><span class="p">))))</span>
</span></span></code></pre></div><p><a id="code-snippet--vertico-directory"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-directory</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span> <span class="p">(</span><span class="nv">rfn-eshadow-update-overlay</span> <span class="nv">vertico-directory-tidy</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">vertico-map</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;DEL&#34;</span>   <span class="o">.</span> <span class="nv">vertico-directory-delete-char</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-DEL&#34;</span> <span class="o">.</span> <span class="nv">vertico-directory-delete-word</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;C-w&#34;</span>   <span class="o">.</span> <span class="nv">vertico-directory-delete-word</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;RET&#34;</span>   <span class="o">.</span> <span class="nv">vertico-directory-enter</span><span class="p">)))</span>
</span></span></code></pre></div><p><a id="code-snippet--vertico-repeat"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-repeat</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-x .&#34;</span> <span class="o">.</span> <span class="nv">vertico-repeat</span><span class="p">)))</span>
</span></span></code></pre></div><p><a id="code-snippet--vertico-reverse"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-reverse</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :disabled</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico</span><span class="p">)</span>
</span></span></code></pre></div><p><a id="code-snippet--vertico-repeat"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-flat</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :bind (:map vertico-map</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;             (&#34;M-q&#34; . vertico-flat-mode))</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico</span><span class="p">)</span>
</span></span></code></pre></div><p><a id="code-snippet--vertico-buffer"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico-buffer</span>
</span></span><span class="line"><span class="cl">      <span class="nb">:load-path</span> <span class="s">&#34;~/.emacs.d/lisp/vertico-extensions/&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="nb">:after</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;; :hook (vertico-buffer-mode . vertico-buffer-setup)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-buffer-display-action</span> <span class="ss">&#39;display-buffer-reuse-window</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="orderless-completion"><span class="section-num">9.3</span> Orderless completion&nbsp;<a class="hanchor" href="#orderless-completion">#</a> </h3>
<p>Search for commands, buffers, etc with vertico without having to match
the order of words in the command. Adding spaces between keywords can
match commands with those words anywhere in them. This config was
bootlegged from <a href="https://github.com/minad/consult/wiki#minads-orderless-configuration">minad&rsquo;s config at the consult wiki</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">orderless</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defvar</span> <span class="nv">+orderless-dispatch-alist</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="sc">?%</span> <span class="o">.</span> <span class="nv">char-fold-to-regexp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="sc">?!</span> <span class="o">.</span> <span class="nv">orderless-without-literal</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="sc">?`</span><span class="o">.</span> <span class="nv">orderless-initialism</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="sc">?=</span> <span class="o">.</span> <span class="nv">orderless-literal</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="sc">?~</span> <span class="o">.</span> <span class="nv">orderless-flex</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Recognizes the following patterns:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; * ~flex flex~</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; * =literal literal=</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; * %char-fold char-fold%</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; * `initialism initialism`</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; * !without-literal without-literal!</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; * .ext (file extension)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; * regexp$ (regexp matching at end)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">+orderless-dispatch</span> <span class="p">(</span><span class="nv">pattern</span> <span class="nv">index</span> <span class="nv">_total</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">cond</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; Ensure that $ works with Consult commands, which add disambiguation suffixes</span>
</span></span><span class="line"><span class="cl">   <span class="p">((</span><span class="nv">string-suffix-p</span> <span class="s">&#34;$&#34;</span> <span class="nv">pattern</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">`</span><span class="p">(</span><span class="nv">orderless-regexp</span> <span class="o">.</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">substring</span> <span class="nv">pattern</span> <span class="mi">0</span> <span class="mi">-1</span><span class="p">)</span> <span class="s">&#34;[\x100000-\x10FFFD]*$&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; File extensions</span>
</span></span><span class="line"><span class="cl">   <span class="p">((</span><span class="nb">and</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; Completing filename or eshell</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">or</span> <span class="nv">minibuffer-completing-file-name</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">derived-mode-p</span> <span class="ss">&#39;eshell-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; File extension</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">string-match-p</span> <span class="s">&#34;\\`\\..&#34;</span> <span class="nv">pattern</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="o">`</span><span class="p">(</span><span class="nv">orderless-regexp</span> <span class="o">.</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;\\.&#34;</span> <span class="p">(</span><span class="nf">substring</span> <span class="nv">pattern</span> <span class="mi">1</span><span class="p">)</span> <span class="s">&#34;[\x100000-\x10FFFD]*$&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; Ignore single !</span>
</span></span><span class="line"><span class="cl">   <span class="p">((</span><span class="nv">string=</span> <span class="s">&#34;!&#34;</span> <span class="nv">pattern</span><span class="p">)</span> <span class="o">`</span><span class="p">(</span><span class="nv">orderless-literal</span> <span class="o">.</span> <span class="s">&#34;&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; Prefix and suffix</span>
</span></span><span class="line"><span class="cl">   <span class="p">((</span><span class="nv">if-let</span> <span class="p">(</span><span class="nv">x</span> <span class="p">(</span><span class="nf">assq</span> <span class="p">(</span><span class="nf">aref</span> <span class="nv">pattern</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">+orderless-dispatch-alist</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">cons</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">substring</span> <span class="nv">pattern</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">when-let</span> <span class="p">(</span><span class="nv">x</span> <span class="p">(</span><span class="nf">assq</span> <span class="p">(</span><span class="nf">aref</span> <span class="nv">pattern</span> <span class="p">(</span><span class="nf">1-</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">pattern</span><span class="p">)))</span> <span class="nv">+orderless-dispatch-alist</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">cons</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">substring</span> <span class="nv">pattern</span> <span class="mi">0</span> <span class="mi">-1</span><span class="p">)))))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Define orderless style with initialism by default</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">orderless-define-completion-style</span> <span class="nv">+orderless-with-initialism</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">orderless-matching-styles</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">orderless-initialism</span> <span class="nv">orderless-literal</span> <span class="nv">orderless-regexp</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; You may want to combine the `orderless` style with `substring` and/or `basic`.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; There are many details to consider, but the following configurations all work well.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Personally I (@minad) use option 3 currently. Also note that you may want to configure</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; special styles for special completion categories, e.g., partial-completion for files.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; 1. (setq completion-styles &#39;(orderless))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; This configuration results in a very coherent completion experience,</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; since orderless is used always and exclusively. But it may not work</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; in all scenarios. Prefix expansion with TAB is not possible.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; 2. (setq completion-styles &#39;(substring orderless))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; By trying substring before orderless, TAB expansion is possible.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; The downside is that you can observe the switch from substring to orderless</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; during completion, less coherent.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; 3. (setq completion-styles &#39;(orderless basic))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Certain dynamic completion tables (completion-table-dynamic)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; do not work properly with orderless. One can add basic as a fallback.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Basic will only be used when orderless fails, which happens only for</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; these special tables.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; 4. (setq completion-styles &#39;(substring orderless basic))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Combine substring, orderless and basic.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">completion-styles</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">orderless</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">completion-category-defaults</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;;; Enable partial-completion for files.</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;;; Either give orderless precedence or partial-completion.</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;;; Note that completion-category-overrides is not really an override,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;;; but rather prepended to the default completion-styles.</span>
</span></span><span class="line"><span class="cl">      <span class="c1">;; completion-category-overrides &#39;((file (styles orderless partial-completion))) ;; orderless is tried first</span>
</span></span><span class="line"><span class="cl">      <span class="nv">completion-category-overrides</span> <span class="o">&#39;</span><span class="p">((</span><span class="nv">file</span> <span class="p">(</span><span class="nv">styles</span> <span class="nv">partial-completion</span><span class="p">))</span> <span class="c1">;; partial-completion is tried first</span>
</span></span><span class="line"><span class="cl">                                      <span class="c1">;; enable initialism by default for symbols</span>
</span></span><span class="line"><span class="cl">                                      <span class="p">(</span><span class="nv">command</span> <span class="p">(</span><span class="nv">styles</span> <span class="nv">+orderless-with-initialism</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                                      <span class="p">(</span><span class="nv">variable</span> <span class="p">(</span><span class="nv">styles</span> <span class="nv">+orderless-with-initialism</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                                      <span class="p">(</span><span class="nv">symbol</span> <span class="p">(</span><span class="nv">styles</span> <span class="nv">+orderless-with-initialism</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="nv">orderless-component-separator</span> <span class="nf">#&#39;</span><span class="nv">orderless-escapable-split-on-space</span> <span class="c1">;; allow escaping space with backslash!</span>
</span></span><span class="line"><span class="cl">      <span class="nv">orderless-style-dispatchers</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">+orderless-dispatch</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="persistent-command-history"><span class="section-num">9.4</span> Persistent command history&nbsp;<a class="hanchor" href="#persistent-command-history">#</a> </h3>
<p>Persist history over Emacs restarts. Vertico sorts by history position.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">savehist</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">savehist-mode</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="a-few-more-useful-configurations"><span class="section-num">9.5</span> A few more useful configurations&nbsp;<a class="hanchor" href="#a-few-more-useful-configurations">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; (use-package emacs</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :init</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Add prompt indicator to `completing-read-multiple&#39;.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Alternatively try `consult-completing-read-multiple&#39;.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">crm-indicator</span> <span class="p">(</span><span class="nv">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nf">cons</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;[CRM] &#34;</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">args</span><span class="p">))</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">args</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">advice-add</span> <span class="nf">#&#39;</span><span class="nv">completing-read-multiple</span> <span class="nb">:filter-args</span> <span class="nf">#&#39;</span><span class="nv">crm-indicator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Do not allow the cursor in the minibuffer prompt</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">minibuffer-prompt-properties</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">(</span><span class="nv">read-only</span> <span class="no">t</span> <span class="nv">cursor-intangible</span> <span class="no">t</span> <span class="nv">face</span> <span class="nf">minibuffer-prompt</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;minibuffer-setup-hook</span> <span class="nf">#&#39;</span><span class="nv">cursor-intangible-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Emacs 28: Hide commands in M-x which do not work in the current mode.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Vertico commands are hidden in normal buffers.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq read-extended-command-predicate</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;       #&#39;command-completion-default-include-p)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Enable recursive minibuffers</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">enable-recursive-minibuffers</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; )</span>
</span></span></code></pre></div><h3 id="richer-annotations-in-minubuffer"><span class="section-num">9.6</span> Richer annotations in minubuffer&nbsp;<a class="hanchor" href="#richer-annotations-in-minubuffer">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">marginalia</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; The :init configuration is always executed (Not lazy!)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Must be in the :init section of use-package such that the mode gets</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; enabled right away. Note that this forces loading the package.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">marginalia-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; When using Selectrum, ensure that Selectrum is refreshed when cycling annotations.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (advice-add #&#39;marginalia-cycle :after</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;             (lambda () (when (bound-and-true-p selectrum-mode) (selectrum-exhibit &#39;keep-selected))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Prefer richer, more heavy, annotations over the lighter default variant.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; E.g. M-x will show the documentation string additional to the keybinding.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; By default only the keybinding is shown as annotation.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Note that there is the command `marginalia-cycle&#39; to</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; switch between the annotators.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq marginalia-annotators &#39;(marginalia-annotators-heavy marginalia-annotators-light nil))</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h3 id="consult-adds-more-minibuffer-functionality"><span class="section-num">9.7</span> Consult adds more minibuffer functionality&nbsp;<a class="hanchor" href="#consult-adds-more-minibuffer-functionality">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">consult</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Replace bindings. Lazily loaded due by `use-package&#39;.</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="p">((</span><span class="s">&#34;C-x B&#34;</span> <span class="o">.</span> <span class="nv">consult-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-x 4 b&#34;</span> <span class="o">.</span> <span class="nv">consult-buffer-other-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-x 5 b&#34;</span> <span class="o">.</span> <span class="nv">consult-buffer-other-frame</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;M-g i&#34;</span> <span class="o">.</span> <span class="nv">consult-imenu</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;M-g I&#34;</span> <span class="o">.</span> <span class="nv">consult-project-imenu</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; searching for files</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;M-s f&#34;</span> <span class="o">.</span> <span class="nv">consult-find</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;M-s F&#34;</span> <span class="o">.</span> <span class="nv">consult-git-grep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;M-s g&#34;</span> <span class="o">.</span> <span class="nv">consult-grep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;M-s r&#34;</span> <span class="o">.</span> <span class="nv">consult-ripgrep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-c f r&#34;</span> <span class="o">.</span> <span class="nv">consult-recent-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-x C-&#34;</span> <span class="o">.</span> <span class="nv">consult-recent-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; Isearch integration</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-s&#34;</span> <span class="o">.</span> <span class="nv">consult-isearch-history</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-c L&#34;</span> <span class="o">.</span> <span class="nv">consult-outline</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-c h l&#34;</span> <span class="o">.</span> <span class="nv">consult-org-heading</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;; yank from kill-ring</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;M-y&#34;</span> <span class="o">.</span> <span class="nv">consult-yank-pop</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Enable automatic preview at point in the *Completions* buffer. This is</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; relevant when you use the default completion UI. You may want to also</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; enable `consult-preview-at-point-mode` in Embark Collect buffers.</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span> <span class="p">(</span><span class="nv">completion-list-mode</span> <span class="o">.</span> <span class="nv">consult-preview-at-point-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Configure the narrowing key.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">consult-narrow-key</span> <span class="s">&#34;&lt;&#34;</span><span class="p">)</span> <span class="c1">;; (kbd &#34;C-+&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Configure a function which returns the project</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; root directory - projectile.el (projectile-project-root)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;projectile-project-root</span> <span class="s">&#34;projectile&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">consult-project-root-function</span> <span class="nf">#&#39;</span><span class="nv">projectile-project-root</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; use consult with perspective.el</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">consult-customize</span> <span class="nv">consult--source-buffer</span> <span class="nb">:hidden</span> <span class="no">t</span> <span class="nb">:default</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">consult--source-perspective</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nf">list</span> <span class="nb">:name</span>     <span class="s">&#34;Perspective&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="nb">:narrow</span>   <span class="sc">?s</span>
</span></span><span class="line"><span class="cl">          <span class="nb">:category</span> <span class="ss">&#39;buffer</span>
</span></span><span class="line"><span class="cl">          <span class="nb">:state</span>    <span class="nf">#&#39;</span><span class="nv">consult--buffer-state</span>
</span></span><span class="line"><span class="cl">          <span class="nb">:default</span>  <span class="no">t</span>
</span></span><span class="line"><span class="cl">          <span class="nb">:items</span>    <span class="nf">#&#39;</span><span class="nv">persp-get-buffer-names</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">push</span> <span class="nv">consult--source-perspective</span> <span class="nv">consult-buffer-sources</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Optionally add the `consult-flycheck&#39; command.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">consult-flycheck</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">flycheck-command-map</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="s">&#34;!&#34;</span> <span class="o">.</span> <span class="nv">consult-flycheck</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="consult-interface-for-denote"><span class="org-todo todo TODO">TODO</span> <span class="section-num">9.8</span> Consult interface for denote&nbsp;<a class="hanchor" href="#consult-interface-for-denote">#</a> </h3>
<p>I haven&rsquo;t really figured out how to programmatically add additional
functionality/features for consult, nor have I figured out denote.  I
got this from one random <a href="https://whhone.com/posts/denote-with-subdirectories/">blog post</a> about denote while looking for how
people use denote to work with sub-directories. I&rsquo;ve just grabbed the
files from their <a href="https://codeberg.org/whhone/consult-denote/">package</a> for now but I might need to extend this if I
end up switching to using denote for journaling.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">consult-denote</span>
</span></span><span class="line"><span class="cl">   <span class="nb">:straight</span> <span class="p">(</span><span class="nv">consult-denote</span> <span class="nb">:type</span> <span class="nv">git</span> <span class="nb">:host</span> <span class="nv">codeberg</span> <span class="nb">:repo</span> <span class="s">&#34;whhone/consult-denote&#34;</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="embark-actions-reorganise"><span class="org-todo todo TODO">TODO</span> <span class="section-num">9.9</span> Embark - actions; reorganise&nbsp;<a class="hanchor" href="#embark-actions-reorganise">#</a> </h3>
<p>This I&rsquo;ve not used yet but makes a lot of stuff easier like
searchingfor the <code>definition</code> or the <code>help/info</code> page a highlighted
word from within the buffer or the minibuffer or even the minibuffer
completion list.</p>
<p><strong>Group with the rest of the packages from this family?</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">embark</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="p">((</span><span class="s">&#34;C-S-a&#34;</span> <span class="o">.</span> <span class="nv">embark-act</span><span class="p">)</span>       <span class="c1">;; pick some comfortable binding</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-h B&#34;</span> <span class="o">.</span> <span class="nv">embark-bindings</span><span class="p">))</span> <span class="c1">;; alternative for `describe-bindings&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Optionally replace the key help with a completing-read interface</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">prefix-help-command</span> <span class="nf">#&#39;</span><span class="nv">embark-prefix-help-command</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Hide the mode line of the Embark live/completions buffers</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;display-buffer-alist</span>
</span></span><span class="line"><span class="cl">               <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\`\\*Embark Collect \\(Live\\|Completions\\)\\*&#34;</span>
</span></span><span class="line"><span class="cl">                 <span class="no">nil</span>
</span></span><span class="line"><span class="cl">                 <span class="p">(</span><span class="nf">window-parameters</span> <span class="p">(</span><span class="nv">mode-line-format</span> <span class="o">.</span> <span class="nv">none</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Consult users will also want the embark-consult package.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">embark-consult</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="p">(</span><span class="nv">embark</span> <span class="nv">consult</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:demand</span> <span class="no">t</span> <span class="c1">; only necessary if you have the hook below</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; if you want to have consult previews as you move around an</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; auto-updating embark collect buffer</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">embark-collect-mode</span> <span class="o">.</span> <span class="nv">consult-preview-at-point-mode</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="corfu-for-completion-in-buffer"><span class="section-num">10</span> Corfu for completion in buffer&nbsp;<a class="hanchor" href="#corfu-for-completion-in-buffer">#</a> </h2>
<p>This might need some more work - integration with <a href="https://github.com/minad/cape">minad&rsquo;s <code>cape</code></a> for
various kinds of completions although he alleges this works well with
base Emacs.</p>
<p><a id="code-snippet--corfu-competions"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">corfu</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">:map</span> <span class="nv">corfu-map</span>
</span></span><span class="line"><span class="cl">         <span class="c1">;; ??? :states &#39;insert</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;TAB&#34;</span> <span class="o">.</span> <span class="nv">corfu-next</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">([</span><span class="nv">tab</span><span class="p">]</span> <span class="o">.</span> <span class="nv">corfu-next</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;S-TAB&#34;</span> <span class="o">.</span> <span class="nv">corfu-previous</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">([</span><span class="nv">backtab</span><span class="p">]</span> <span class="o">.</span> <span class="nv">corfu-previous</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;&lt;escape&gt;&#34;</span> <span class="o">.</span> <span class="nv">corfu-quit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;&lt;return&gt;&#34;</span> <span class="o">.</span> <span class="nv">corfu-insert</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-d&#34;</span> <span class="o">.</span> <span class="nv">corfu-show-documentation</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-l&#34;</span> <span class="o">.</span> <span class="ss">&#39;corfu-show-location</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;SPC&#34;</span> <span class="o">.</span> <span class="nv">corfu-insert-separator</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Only use `corfu&#39; when calling `completion-at-point&#39; or</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (corfu-auto t)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; `indent-for-tab-command&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (corfu-auto-prefix 3)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (corfu-auto-delay 0.2)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; size</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-min-width</span> <span class="mi">80</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Always have the same width</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-max-width</span> <span class="nv">corfu-min-width</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-count</span> <span class="mi">14</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-scroll-margin</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-cycle</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Show documentation in echo area?</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-echo-documentation</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Preselect first candidate?</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-preselect-first</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Preview current candidate?</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-preview-current</span> <span class="ss">&#39;insert</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; quit if no match</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">corfu-quit-no-match</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-corfu-mode</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="cape-extensions-for-corfu"><span class="section-num">10.1</span> CAPE - extensions for corfu&nbsp;<a class="hanchor" href="#cape-extensions-for-corfu">#</a> </h3>
<p>Corfu needs <code>cape</code> to provide completion backends because it&rsquo;s extremely
stripped down. Will have to check what other backends I&rsquo;ll need to
enable.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">cape</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">cape-dabbrev-min-length</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; Add `completion-at-point-functions&#39;, used by `completion-at-point&#39;.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">backend</span> <span class="o">&#39;</span><span class="p">(</span> <span class="nv">cape-file</span> <span class="nv">cape-dabbrev</span> <span class="nv">cape-keyword</span> <span class="nv">cape-abbrev</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">cape-ispell</span> <span class="nv">cape-dict</span> <span class="nv">cape-symbol</span> <span class="nv">cape-line</span> <span class="p">))</span>
</span></span><span class="line"><span class="cl">                     <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;completion-at-point-functions</span> <span class="nv">backend</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;completion-at-point-functions</span> <span class="nf">#&#39;</span><span class="nv">cape-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;completion-at-point-functions</span> <span class="nf">#&#39;</span><span class="nv">cape-keyword</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;completion-at-point-functions</span> <span class="nf">#&#39;</span><span class="nv">cape-ispell</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;completion-at-point-functions</span> <span class="nf">#&#39;</span><span class="nv">cape-dict</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;completion-at-point-functions</span> <span class="nf">#&#39;</span><span class="nv">cape-symbol</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="look"><span class="section-num">11</span> Look&nbsp;<a class="hanchor" href="#look">#</a> </h2>
<h3 id="font-configuration"><span class="section-num">11.1</span> Font configuration&nbsp;<a class="hanchor" href="#font-configuration">#</a> </h3>
<h4 id="setting-a-font"><span class="section-num">11.1.1</span> Setting a font&nbsp;<a class="hanchor" href="#setting-a-font">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; first set default</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;default</span> <span class="no">nil</span> <span class="nb">:family</span> <span class="s">&#34;Hack&#34;</span> <span class="nb">:height</span> <span class="mi">70</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; then set variable-pitch fonts</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;variable-pitch</span> <span class="no">nil</span> <span class="nb">:family</span> <span class="s">&#34;Iosevka Aile&#34;</span> <span class="nb">:height</span> <span class="mf">1.1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; finally set fixed-pitch</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;fixed-pitch</span> <span class="no">nil</span> <span class="nb">:family</span> <span class="s">&#34;Hack&#34;</span> <span class="nb">:height</span> <span class="mf">1.0</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="line-spacing"><span class="section-num">11.1.2</span> Line spacing&nbsp;<a class="hanchor" href="#line-spacing">#</a> </h4>
<p>Usually 0, less if possible but Emacs doesn&rsquo;t allow for that.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; Line spacing, can be 0 for code and 1 or 2 for text</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq-default</span> <span class="nv">line-spacing</span> <span class="mf">0.1</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="editor-theme"><span class="section-num">11.2</span> Editor theme&nbsp;<a class="hanchor" href="#editor-theme">#</a> </h3>
<p>Update: <span class="timestamp-wrapper"><span class="timestamp">&lt;2022-11-21 Mon&gt; </span></span> Moved this up so it doesn&rsquo;t throw the cryptic
error with Modus themes: <code>Debugger entered--Lisp error: (wrong-number-of-arguments (1 . 2) 8)</code> This is based on <a href="https://gitlab.com/protesilaos/modus-themes/-/issues/306#note_1147003189">Adam Spiers&rsquo;s comment</a> - the theme should be
loaded before <code>custom.el</code> is pulled in to avoid issues with version
mismatch like the shit with the <code>org</code> package.</p>
<h4 id="ef-themes"><span class="section-num">11.2.1</span> ef-themes&nbsp;<a class="hanchor" href="#ef-themes">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ef-themes</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; If you like two specific themes and want to switch between them, you</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; can specify them in `ef-themes-to-toggle&#39; and then invoke the command</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; `ef-themes-toggle&#39;.  All the themes are included in the variable</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; `ef-themes-collection&#39;.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ef-themes-to-toggle</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">ef-night</span> <span class="nv">ef-duo-dark</span> <span class="nv">ef-winter</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ef-themes-headings</span> <span class="c1">; read the manual&#39;s entry or the doc string</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">((</span><span class="mi">0</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span> <span class="nv">light</span> <span class="mf">1.2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="mi">1</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span> <span class="nv">light</span> <span class="mf">1.1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="mi">2</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span> <span class="nv">regular</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="mi">3</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span> <span class="nv">regular</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="mi">4</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span> <span class="nv">regular</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="mi">5</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span><span class="p">))</span> <span class="c1">; absence of weight means `bold&#39;</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="mi">6</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="mi">7</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="no">t</span> <span class="o">.</span> <span class="p">(</span><span class="nv">variable-pitch</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; They are nil by default...</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ef-themes-mixed-fonts</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">ef-themes-variable-pitch-ui</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Read the doc string or manual for this one.  The symbols can be</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; combined in any order.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ef-themes-region</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">intense</span> <span class="nv">no-extend</span> <span class="nv">neutral</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Disable all other themes to avoid awkward blending:</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">mapc</span> <span class="nf">#&#39;</span><span class="nv">disable-theme</span> <span class="nv">custom-enabled-themes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Load the theme of choice:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;ef-summer :no-confirm)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; OR use this to load the theme which also calls `ef-themes-post-load-hook&#39;:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (ef-themes-select &#39;ef-winter)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; The themes we provide are recorded in the `ef-themes-dark-themes&#39;,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; `ef-themes-light-themes&#39;.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; We also provide these commands, but do not assign them to any key:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; - `ef-themes-toggle&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; - `ef-themes-select&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; - `ef-themes-load-random&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; - `ef-themes-preview-colors&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; - `ef-themes-preview-colors-current&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h4 id="modus-from-protesilaos"><span class="section-num">11.2.2</span> Modus from Protesilaos!&nbsp;<a class="hanchor" href="#modus-from-protesilaos">#</a> </h4>
<p>This might need additional setting since modus themes are now included
within Emacs</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">modus-themes</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:source</span> <span class="nv">gnu-elpa-mirror</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">modus-themes-mixed-fonts</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-bold-constructs</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-italic-constructs</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-region</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">no-extend</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-mode-line</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">accented</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-prompts</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">backgound</span> <span class="nv">bold</span> <span class="nv">intense</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">;; modus-themes-hl-line &#39;accented</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-intense-markup</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-region</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">no-extend</span> <span class="nv">bg-only</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-subtle-line-numbers</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-fringes</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">subtle</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-language-checkers</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">straight-underline</span> <span class="nv">faint</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-org-blocks</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">gray-background</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">modus-themes-completions</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">((</span><span class="nv">matches</span> <span class="o">.</span> <span class="p">(</span><span class="nv">bold</span> <span class="nv">background</span> <span class="nv">intense</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">selection</span> <span class="o">.</span> <span class="p">(</span><span class="nv">bold</span> <span class="nv">background</span> <span class="nv">intense</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">popup</span> <span class="o">.</span> <span class="p">(</span><span class="nv">accented</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/call-modus-operandi</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; heading backgrounds work better here</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">disable-theme</span> <span class="ss">&#39;modus-vivendi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">modus-themes-headings</span>
</span></span><span class="line"><span class="cl">          <span class="o">&#39;</span><span class="p">((</span><span class="mi">1</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">background</span> <span class="nv">variable-pitch</span> <span class="nv">bold</span> <span class="mf">1.1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="mi">2</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">background</span> <span class="nv">variable-pitch</span> <span class="nv">bold</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="mi">3</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">background</span> <span class="nv">variable-pitch</span> <span class="nv">semibold</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="mi">4</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">background</span> <span class="nv">variable-pitch</span> <span class="nv">semibold</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="no">t</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">variable-pitch</span> <span class="nv">semibold</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">modus-themes-load-operandi</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/call-modus-vivendi</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">disable-theme</span> <span class="ss">&#39;modus-operandi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">modus-themes-headings</span>
</span></span><span class="line"><span class="cl">          <span class="o">&#39;</span><span class="p">((</span><span class="mi">1</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">monochrome</span> <span class="nv">variable-pitch</span> <span class="nv">bold</span> <span class="mf">1.1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="mi">2</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">monochrome</span> <span class="nv">variable-pitch</span> <span class="nv">bold</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="mi">3</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">monochrome</span> <span class="nv">variable-pitch</span> <span class="nv">semibold</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="mi">4</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">monochrome</span> <span class="nv">variable-pitch</span> <span class="nv">semibold</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="no">t</span> <span class="o">.</span> <span class="p">(</span><span class="nv">overline</span> <span class="nv">variable-pitch</span> <span class="nv">semibold</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">modus-themes-load-vivendi</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; set semibold as the bold face</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (for those fonts that provide this face)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (set-face-attribute &#39;bold nil :weight &#39;semibold)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; :config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Load the theme files before enabling a theme</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">modus-themes-load-themes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Load the theme of your choice:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (peremacs/call-modus-operandi)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">peremacs/call-modus-vivendi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><h4 id="commentary"><span class="section-num">11.2.3</span> Commentary&nbsp;<a class="hanchor" href="#commentary">#</a> </h4>
<p>An elegant theme highlighting comments only</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">commentary-theme</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;(load-theme &#39;commentary t)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h4 id="my-themes"><span class="section-num">11.2.4</span> My themes&nbsp;<a class="hanchor" href="#my-themes">#</a> </h4>
<p>Neither of these work using <code>straight.el</code> or <code>use-package</code>, together
or separately (afaik). If these work, I could maybe add some more of
my own.</p>
<p>Forked from the <a href="https://github.com/lthms/colorless-themes">colorless-themes macro</a>. This includes my version of
the macro, original themes from Thomas Letan, and some additional
themes of my own that use this macro.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">colourless-themes</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:host</span> <span class="nv">gitlab</span> <span class="nb">:repo</span> <span class="s">&#34;peregrinator/colourless-themes-el&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;;:config</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;;(load-theme &#39;beelzebub t)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span></code></pre></div><h4 id="unused"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5</span> unused&nbsp;<a class="hanchor" href="#unused">#</a> </h4>
<h5 id="wilmersdorf"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.1</span> Wilmersdorf&nbsp;<a class="hanchor" href="#wilmersdorf">#</a> </h5>
<p>I saw this on <a href="https://github.com/hlissner/emacs-doom-themes">doom-themes</a> but I don&rsquo;t want to pull all of those just
for this, so installing from it&rsquo;s <a href="https://github.com/ianyepan/wilmersdorf-emacs-theme">GitHub</a> using <code>straight.el</code>. But it
fails to load with <code>use-package</code> so I&rsquo;m going to have to do it manually.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">wilmersdorf</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:host</span> <span class="nv">github</span> <span class="nb">:repo</span> <span class="s">&#34;ianyepan/wilmersdorf-emacs-theme&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; :config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;wilmersdorf t)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h5 id="tao"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.2</span> Tao&nbsp;<a class="hanchor" href="#tao">#</a> </h5>
<p>Monochrome theme with minimal bold highlights and boxes?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">tao-theme</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; load theme</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">&#39;tao-yang</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;tao-yin t)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h5 id="expresso"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.3</span> Expresso&nbsp;<a class="hanchor" href="#expresso">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">espresso-theme</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:host</span> <span class="nv">github</span> <span class="nb">:repo</span> <span class="s">&#34;dgutov/espresso-theme&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;;:config</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">&#39;espresso</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span></code></pre></div><h5 id="github-dark"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.4</span> Github dark&nbsp;<a class="hanchor" href="#github-dark">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">github-dark-vscode-theme</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">&#39;github-dark-vscode</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; fixed upstream</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; unrelated but the cursor colour really needs improvement</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (set-cursor-color &#34;#ffffff&#34;)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h5 id="github-modern--light"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.5</span> Github modern (light)&nbsp;<a class="hanchor" href="#github-modern--light">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">github-modern-theme</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">&#39;github-modern</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h5 id="vale"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.6</span> Vale&nbsp;<a class="hanchor" href="#vale">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vale</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:type</span> <span class="nv">git</span> <span class="nb">:repo</span> <span class="s">&#34;https://codeberg.org/ext0l/vale.el&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;vale t)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h5 id="parchment"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.7</span> Parchment&nbsp;<a class="hanchor" href="#parchment">#</a> </h5>
<p>Based on the screenshot of Haskell code on the <a href="https://fsd.it/shop/fonts/pragmatapro/#tab-fb289adf-7c14-8">Pragmata Pro website</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">Parchment-theme</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:host</span> <span class="nv">github</span> <span class="nb">:repo</span> <span class="s">&#34;brihadeesh/emacs-parchment-theme&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;Parchment t)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h5 id="almost-mono"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.8</span> Almost mono&nbsp;<a class="hanchor" href="#almost-mono">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">almost-mono-themes</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;almost-mono-black t)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;almost-mono-gray t)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;almost-mono-cream t)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (load-theme &#39;almost-mono-white t)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h5 id="stimmung-themes-for-nearly-monochrome-appearance"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.9</span> Stimmung themes for nearly monochrome appearance&nbsp;<a class="hanchor" href="#stimmung-themes-for-nearly-monochrome-appearance">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">stimmung-themes</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :straight (stimmung-themes :host github :repo &#34;motform/stimmung-themes&#34;) ; if you are a straight shooter</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (stimmung-themes-load-dark)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h3 id="highlighted-line-mode"><span class="section-num">11.3</span> Highlighted line-mode&nbsp;<a class="hanchor" href="#highlighted-line-mode">#</a> </h3>
<p><a id="code-snippet--cursorline"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; cursorline</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-hl-line-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="solid-window-dividers"><span class="section-num">11.4</span> Solid window dividers&nbsp;<a class="hanchor" href="#solid-window-dividers">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; (setq window-divider-default-right-width 1)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (setq window-divider-default-bottom-width 1)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (setq window-divider-default-places &#39;all)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (window-divider-mode)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">window-divider-default-right-width</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">window-divider-default-bottom-width</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">window-divider-default-places</span> <span class="ss">&#39;right-only</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-init-hook</span> <span class="nf">#&#39;</span><span class="nv">window-divider-mode</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="something-about-underlines"><span class="section-num">11.5</span> Something about underlines&nbsp;<a class="hanchor" href="#something-about-underlines">#</a> </h3>
<p>Underline line at descent position, not baseline position</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">x-underline-at-descent-line</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="cursor-configuration"><span class="section-num">11.6</span> Cursor configuration&nbsp;<a class="hanchor" href="#cursor-configuration">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nf">set-default</span> <span class="ss">&#39;cursor-type</span>  <span class="o">&#39;</span><span class="p">(</span><span class="nv">bar</span> <span class="o">.</span> <span class="mi">2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">blink-cursor-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="line-number-format"><span class="section-num">11.7</span> Line-number format&nbsp;<a class="hanchor" href="#line-number-format">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">linum-format</span> <span class="s">&#34;%4d &#34;</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="visual-not-audible-bell"><span class="section-num">11.8</span> Visual not audible bell&nbsp;<a class="hanchor" href="#visual-not-audible-bell">#</a> </h3>
<p>Flashes modeline for warnings from <a href="https://github.com/purcell/mode-line-bell">purcell</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; No sound</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ring-bell-function</span> <span class="ss">&#39;ignore</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">mode-line-bell</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">mode-line-bell-mode</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="no-tooltips"><span class="section-num">11.9</span> No Tooltips&nbsp;<a class="hanchor" href="#no-tooltips">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">tooltip-mode</span> <span class="mi">0</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="minibuffer-appearance"><span class="section-num">11.10</span> Minibuffer appearance?&nbsp;<a class="hanchor" href="#minibuffer-appearance">#</a> </h3>
<p>As per <a href="https://www.reddit.com/r/emacs/comments/rxa29k/is_it_possible_to_have_a_window_which_is_just_the/hrhvrqw/">Hamilton9508&rsquo;s comment</a> he makes a single minibuffer-only frame
across the bottom of the Emacs window and so the rest of the frames
have only a single buffer (i.e. the buffer being edited/used) and no
minubuffer of it&rsquo;s own. Not sure if this will work for me but I&rsquo;ll
perhaps give it a shot.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">minibuffer-frame-alist</span> <span class="o">&#39;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">name</span> <span class="o">.</span> <span class="s">&#34;minibuf&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">menu-bar-lines</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">vertical-scroll-bars</span> <span class="o">.</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">auto-raise</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">sticky</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">left</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">top</span> <span class="o">.</span> <span class="mi">-1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">height</span> <span class="o">.</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">internal-border-width</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">minibuffer</span> <span class="o">.</span> <span class="nv">only</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="minimalist-and-ordered-mode-line"><span class="section-num">11.11</span> Minimalist and ordered mode-line&nbsp;<a class="hanchor" href="#minimalist-and-ordered-mode-line">#</a> </h3>
<p>People seem to use packages for this. I&rsquo;ve considered using the
<a href="https://github.com/seagle0128/doom-modeline">doom-modeline</a> but it seems to be pretty heavy in terms of dependencies
and I&rsquo;d like a mode-line with a much more fundamental interface
although it&rsquo;s still a good contender considering it&rsquo;s very simple to
configure. I&rsquo;m also considering <a href="https://github.com/gexplorer/simple-modeline">simple-mode-line</a>.</p>
<h4 id="mood-line-because-i-m-fucking-tired"><span class="section-num">11.11.1</span> Mood-line because I&rsquo;m fucking tired&nbsp;<a class="hanchor" href="#mood-line-because-i-m-fucking-tired">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">mood-line</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">mood-line-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h3 id="pulse-to-locate-cursor-with-protesilaos-s-pulsar"><span class="section-num">11.12</span> Pulse to locate cursor with Protesilaos&rsquo;s pulsar&nbsp;<a class="hanchor" href="#pulse-to-locate-cursor-with-protesilaos-s-pulsar">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">pulsar</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:host</span> <span class="nv">gitlab</span> <span class="nb">:repo</span> <span class="s">&#34;protesilaos/pulsar&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">pulsar-pulse-functions</span> <span class="c1">; Read the doc string for why not `setq&#39;</span>
</span></span><span class="line"><span class="cl">   <span class="o">&#39;</span><span class="p">(</span><span class="nv">recenter-top-bottom</span>
</span></span><span class="line"><span class="cl">     <span class="nv">move-to-window-line-top-bottom</span>
</span></span><span class="line"><span class="cl">     <span class="nv">reposition-window</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; bookmark-jump</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; other-window</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; delete-window</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; delete-other-windows</span>
</span></span><span class="line"><span class="cl">     <span class="nv">forward-page</span>
</span></span><span class="line"><span class="cl">     <span class="nv">backward-page</span>
</span></span><span class="line"><span class="cl">     <span class="nv">scroll-up-command</span>
</span></span><span class="line"><span class="cl">     <span class="nv">scroll-down-command</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-right</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-left</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-up</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-down</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-swap-states-right</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-swap-states-left</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-swap-states-up</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; windmove-swap-states-down</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; tab-new</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; tab-close</span>
</span></span><span class="line"><span class="cl">     <span class="c1">;; tab-next</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-next-visible-heading</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-previous-visible-heading</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-forward-heading-same-level</span>
</span></span><span class="line"><span class="cl">     <span class="nv">org-backward-heading-same-level</span>
</span></span><span class="line"><span class="cl">     <span class="nv">outline-backward-same-level</span>
</span></span><span class="line"><span class="cl">     <span class="nv">outline-forward-same-level</span>
</span></span><span class="line"><span class="cl">     <span class="nv">outline-next-visible-heading</span>
</span></span><span class="line"><span class="cl">     <span class="nv">outline-previous-visible-heading</span>
</span></span><span class="line"><span class="cl">     <span class="nv">outline-up-heading</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">pulsar-pulse-on-window-change</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">pulsar-pulse</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">        <span class="nv">pulsar-delay</span> <span class="mf">0.055</span>
</span></span><span class="line"><span class="cl">        <span class="nv">pulsar-iterations</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">        <span class="nv">pulsar-face</span> <span class="ss">&#39;pulsar-cyan</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">pulsar-global-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="p">((</span><span class="s">&#34;C-c l&#34;</span> <span class="o">.</span> <span class="nv">pulsar-pulse-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="s">&#34;C-c h l&#34;</span> <span class="o">.</span> <span class="nv">pulsar-highlight-line</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">consult-after-jump</span> <span class="o">.</span> <span class="nv">pulsar-recenter-top</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">consult-after-jump</span> <span class="o">.</span> <span class="nv">pulsar-reveal-entry</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="display-complex-key-binding-suggestions"><span class="section-num">11.13</span> Display complex key-binding suggestions&nbsp;<a class="hanchor" href="#display-complex-key-binding-suggestions">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">which-key</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span> <span class="nv">which-key-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">which-key-mode</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="diminish-for-a-cleaner-modeline"><span class="section-num">11.14</span> Diminish for a cleaner modeline&nbsp;<a class="hanchor" href="#diminish-for-a-cleaner-modeline">#</a> </h3>
<p><code>org-indent-mode</code> doesn&rsquo;t get disabled by the default method.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">diminish</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:diminish</span> <span class="nv">auto-fill-function</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:diminish</span> <span class="nv">flyspell-mode</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:diminish</span> <span class="nv">visual-line-mode</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/diminish-org-indent</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">diminish</span> <span class="ss">&#39;org-indent-mode</span> <span class="s">&#34;&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-indent-mode-hook</span> <span class="ss">&#39;peremacs/diminish-org-indent</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="pixel-scroll-precision-mode--emacs-29-plus"><span class="section-num">11.15</span> Pixel scroll precision mode (Emacs 29+)&nbsp;<a class="hanchor" href="#pixel-scroll-precision-mode--emacs-29-plus">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">pixel-scroll-precision-mode</span> <span class="mi">+1</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="make-emacs-the-window-title"><span class="section-num">11.16</span> Make &ldquo;Emacs&rdquo; the <strong>window title</strong>&nbsp;<a class="hanchor" href="#make-emacs-the-window-title">#</a> </h3>
<p><a id="code-snippet--set-window-title"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq-default</span> <span class="nv">frame-title-format</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;Emacs&#34;</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="make-scratch-buffer-and-minibuffer-blank"><span class="section-num">11.17</span> Make <strong>scratch</strong> buffer and <strong>minibuffer</strong> blank&nbsp;<a class="hanchor" href="#make-scratch-buffer-and-minibuffer-blank">#</a> </h3>
<p><a id="code-snippet--blank-startup"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">initial-scratch-message</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-startup-echo-area-message</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-startup-message</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">initial-scratch-message</span> <span class="no">nil</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="show-keystrokes"><span class="section-num">11.18</span> Show keystrokes&nbsp;<a class="hanchor" href="#show-keystrokes">#</a> </h3>
<p>Stolen from <a href="https://github.com/karthink/emacs.d">Karthik Chikmaglur&rsquo;s emacs.d</a>; shows what is typed immediately.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">echo-keystrokes</span> <span class="mf">0.01</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="window-management"><span class="section-num">12</span> Window Management&nbsp;<a class="hanchor" href="#window-management">#</a> </h2>
<h3 id="exwm"><span class="section-num">12.1</span> EXWM&nbsp;<a class="hanchor" href="#exwm">#</a> </h3>
<p>This ofc <strong>doesn&rsquo;t work</strong> on wayland and <code>pgtk</code> emacs but am I willing
to learn C++ and emacs-lisp well enough to contribute to porting this
to wayland/wlroots or something?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">exwm</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :ensure t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-workspace-number</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; (defun exwm-start-process (command)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;   &#34;Start a process via a shell COMMAND.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;   (interactive (list (read-shell-command &#34;$ &#34;)))</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;   (start-process-shell-command command nil command))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; ((kbd &#34;&lt;s-return&gt;&#34;) #&#39;exwm-start-process)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; (exwm-input-set-key (kbd &#34;&lt;s-return&gt;&#34;) #&#39;exwm-start-process)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; This now has to be toggled separately in the `~/.xinitrc&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; see https://www.reddit.com/r/emacs/comments/mjx2qd/conditional_loading_for_exwm_with_usepackage/gte7puu/</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;exwm-config</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (exwm-config-default)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Effective use of EXWM requires the ability to return from char-mode to line-mode.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; This will be performed with s-r.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-r&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">exwm-reset</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Hide all windows except the current one.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-o&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">delete-other-windows</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Close the current window and kill its buffer.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-s-x&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">kill-buffer-and-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Close the current window without killing its buffer.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-x&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">delete-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Open an Eshell buffer in the current buffer’s location.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-z&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">eshell-find-eshell-here</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;  Move point to the windows immediately around the current window.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-h&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">windmove-left</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-j&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">windmove-down</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-k&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">windmove-up</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-l&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">windmove-right</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">exwm-input-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-w&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">exwm-workspace-switch</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="workspaces-with-perspective-el"><span class="section-num">12.2</span> Workspaces with perspective-el&nbsp;<a class="hanchor" href="#workspaces-with-perspective-el">#</a> </h3>
<p>Independent workspaces for different projects like profiles on RStudio
but perhaps a lot more dynamic. This might need more work hence adding
<a href="https://github.com/nex3/perspective-el">a link to the project page</a> here.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">perspective</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:demand</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; apparently it&#39;s essential to define a prefix on Emacs=28</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">persp-mode-prefix-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-x x&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; these work with selectrum/vertico i.e. `completing-read&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; type completion systems that are appararently closer to</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; base Emacs functioning.</span>
</span></span><span class="line"><span class="cl">  <span class="p">((</span><span class="s">&#34;C-x b&#34;</span> <span class="o">.</span> <span class="nv">persp-switch-to-buffer*</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="c1">;;(&#34;C-x k&#34; . persp-kill-buffer*)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Running `persp-mode&#39; multiple times resets the perspective list...</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">equal</span> <span class="p">(</span><span class="nf">default-value</span> <span class="ss">&#39;persp-mode</span><span class="p">)</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">persp-mode</span> <span class="mi">1</span><span class="p">)))</span>
</span></span></code></pre></div><h4 id="persp-projectile-for-proper-workspace-window-management"><span class="section-num">12.2.1</span> persp-projectile for proper workspace window management&nbsp;<a class="hanchor" href="#persp-projectile-for-proper-workspace-window-management">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">persp-projectile</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="s">&#34;C-x x s&#34;</span><span class="o">.</span> <span class="nv">persp-projectile-switch-project</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="undo-disrupted-window-frame-arrangement-after-using-some-shit"><span class="section-num">12.3</span> Undo disrupted window/frame arrangement after using some shit&nbsp;<a class="hanchor" href="#undo-disrupted-window-frame-arrangement-after-using-some-shit">#</a> </h3>
<p>Stolen from <a href="https://github.com/karthink/emacs.d">Karthik Chikmaglur&rsquo;s emacs.d</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">winner</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:disabled</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:commands</span> <span class="nv">winner-undo</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-x C-/&#34;</span> <span class="o">.</span> <span class="nv">winner-undo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;s-/&#34;</span> <span class="o">.</span> <span class="nv">winner-undo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;s-S-/&#34;</span> <span class="o">.</span> <span class="nv">winner-redo</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">winner-mode</span> <span class="mi">+1</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="ace-window-helps-with-navigation-between-multiple-windows"><span class="section-num">12.4</span> Ace-window helps with navigation between multiple windows&nbsp;<a class="hanchor" href="#ace-window-helps-with-navigation-between-multiple-windows">#</a> </h3>
<p>Simpler navigation between open Emacs windows</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ace-window</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">aw-keys</span> <span class="o">&#39;</span><span class="p">(</span><span class="sc">?a</span> <span class="sc">?s</span> <span class="sc">?d</span> <span class="sc">?f</span> <span class="sc">?j</span> <span class="sc">?k</span> <span class="sc">?l</span> <span class="sc">?o</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-x o&#34;</span> <span class="o">.</span> <span class="nv">ace-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-o&#34;</span> <span class="o">.</span> <span class="nv">other-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-o&#34;</span> <span class="o">.</span> <span class="nv">ace-window</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span> <span class="nv">ace-window-mode</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="other-actions-that-ace-window-handles"><span class="org-todo todo TODO">TODO</span> <span class="section-num">12.4.0.1</span> Other actions that <code>ace-window</code> handles:&nbsp;<a class="hanchor" href="#other-actions-that-ace-window-handles">#</a> </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defvar</span> <span class="nv">aw-dispatch-alist</span>
</span></span><span class="line"><span class="cl"><span class="o">&#39;</span><span class="p">((</span><span class="sc">?x</span> <span class="nv">aw-delete-window</span> <span class="s">&#34;Delete Window&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?m</span> <span class="nv">aw-swap-window</span> <span class="s">&#34;Swap Windows&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?M</span> <span class="nv">aw-move-window</span> <span class="s">&#34;Move Window&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?c</span> <span class="nv">aw-copy-window</span> <span class="s">&#34;Copy Window&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?j</span> <span class="nv">aw-switch-buffer-in-window</span> <span class="s">&#34;Select Buffer&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?n</span> <span class="nv">aw-flip-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?u</span> <span class="nv">aw-switch-buffer-other-window</span> <span class="s">&#34;Switch Buffer Other Window&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?c</span> <span class="nv">aw-split-window-fair</span> <span class="s">&#34;Split Fair Window&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?v</span> <span class="nv">aw-split-window-vert</span> <span class="s">&#34;Split Vert Window&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?b</span> <span class="nv">aw-split-window-horz</span> <span class="s">&#34;Split Horz Window&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">?o</span> <span class="nv">delete-other-windows</span> <span class="s">&#34;Delete Other Windows&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="sc">??</span> <span class="nv">aw-show-dispatch-help</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;List of actions for </span><span class="ss">`aw-dispatch-default&#39;</span><span class="s">.&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="sane-native-window-management"><span class="org-todo todo TODO">TODO</span> <span class="section-num">12.5</span> Sane native window management&nbsp;<a class="hanchor" href="#sane-native-window-management">#</a> </h3>
<p>Focuses new windows when created.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; Window management</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; focus new windows once created</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">window</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:type</span> <span class="ss">&#39;built-in</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-x 3&#34;</span> <span class="o">.</span> <span class="nv">hsplit-last-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;C-x 2&#34;</span> <span class="o">.</span> <span class="nv">vsplit-last-buffer</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:preface</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">hsplit-last-buffer</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Gives the focus to the last created horizontal window.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">split-window-horizontally</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">other-window</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">vsplit-last-buffer</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Gives the focus to the last created vertical window.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">split-window-vertically</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">other-window</span> <span class="mi">1</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="better-popups-with-popper"><span class="section-num">12.6</span> Better popups with popper&nbsp;<a class="hanchor" href="#better-popups-with-popper">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">popper</span>
</span></span><span class="line"><span class="cl">    <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-`&#34;</span>   <span class="o">.</span> <span class="nv">popper-toggle-latest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="s">&#34;M-`&#34;</span>   <span class="o">.</span> <span class="nv">popper-cycle</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="s">&#34;C-M-`&#34;</span> <span class="o">.</span> <span class="nv">popper-toggle-type</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; assign windows to popper (to appear as popups)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">popper-reference-buffers</span>
</span></span><span class="line"><span class="cl">          <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\*Messages\\*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;Output\\*$&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;\\*Backtrace\\*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;\\*Warnings\\*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^Calc:&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*ielm\\*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;; terminals as popups</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*eshell.*\\*$&#34;</span> <span class="nv">eshell-mode</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*shell.*\\*$&#34;</span> <span class="nv">shell-mode</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*term.*\\*$&#34;</span> <span class="nv">term-mode</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*vterm.*\\*$&#34;</span> <span class="nv">vterm-mode</span>
</span></span><span class="line"><span class="cl">            <span class="nv">help-mode</span>
</span></span><span class="line"><span class="cl">            <span class="nv">compilation-mode</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;; magit stuff</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^magit:*&#34;</span> <span class="nv">magit-mode</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*Ilist\\*$&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;; R console that comes with ESS</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*iESS&#34;</span> <span class="nv">iESS-mode</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*R\\*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;; R-help windows</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;^\\*help\\[R\\]([a-z]*)\\*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;;grouping popups by projectile groups</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">popper-group-function</span> <span class="nf">#&#39;</span><span class="nv">popper-group-by-projectile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;; popper UI configguration</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">setq</span> <span class="nv">popper-modeline</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">popper-mode</span> <span class="mi">+1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; echo area hints?</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">popper-echo-mode</span> <span class="mi">+1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span></code></pre></div><h2 id="garbage"><span class="section-num">13</span> Garbage&nbsp;<a class="hanchor" href="#garbage">#</a> </h2>
<h4 id="from-customize-api"><span class="section-num">13.0.1</span> from customize API&nbsp;<a class="hanchor" href="#from-customize-api">#</a> </h4>
<p>This keeps the init.el cleaner and without junk from <code>customize.el</code>
API allows for an option to gitignore your <code>custom.el</code> cause it&rsquo;s
junk.</p>
<p><a id="code-snippet--customize-disable"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; Offload the custom-set-variables to a separate file</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq custom-file &#34;~/.emacs.d/custom.el&#34;)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">custom-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&#34;/custom.el&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">custom-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nf">write-region</span> <span class="s">&#34;&#34;</span> <span class="no">nil</span> <span class="nv">custom-file</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; Load custom file. Don&#39;t hide errors. Hide success message</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; OR DON&#39;T EVEN BOTHER WITH IT</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (load custom-file nil t)</span>
</span></span></code></pre></div><h4 id="from-backups-and-autosaves"><span class="section-num">13.0.2</span> from backups and autosaves(?)&nbsp;<a class="hanchor" href="#from-backups-and-autosaves">#</a> </h4>
<p><a id="code-snippet--organise-junk"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;;; Put Emacs auto-save and backup files to one folder</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defconst</span> <span class="nv">emacs-tmp-dir</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;emacs%d&#34;</span> <span class="p">(</span><span class="nf">user-uid</span><span class="p">))</span> <span class="nv">temporary-file-directory</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span>
</span></span><span class="line"><span class="cl"> <span class="nv">backup-by-copying</span> <span class="no">t</span>                                        <span class="c1">; Avoid symlinks</span>
</span></span><span class="line"><span class="cl"> <span class="nv">delete-old-versions</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl"> <span class="nv">kept-new-versions</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl"> <span class="nv">kept-old-versions</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"> <span class="nv">version-control</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl"> <span class="nv">auto-save-list-file-prefix</span> <span class="nv">emacs-tmp-dir</span>
</span></span><span class="line"><span class="cl"> <span class="nv">auto-save-file-name-transforms</span> <span class="o">`</span><span class="p">((</span><span class="s">&#34;.*&#34;</span> <span class="o">,</span><span class="nv">emacs-tmp-dir</span> <span class="no">t</span><span class="p">))</span>  <span class="c1">; Change autosave dir to tmp</span>
</span></span><span class="line"><span class="cl"> <span class="nv">backup-directory-alist</span> <span class="o">`</span><span class="p">((</span><span class="s">&#34;.*&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">emacs-tmp-dir</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;;; Lockfiles unfortunately cause more pain than benefit</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">create-lockfiles</span> <span class="no">nil</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="defaults"><span class="section-num">14</span> Defaults&nbsp;<a class="hanchor" href="#defaults">#</a> </h2>
<p>Primarily bootlegged from <a href="https://sanemacs.com">Sanemacs</a> and changed when appropriate (and
when I thought I understood what I was doing)</p>
<h3 id="disable-native-popups-----and-bell"><span class="section-num">14.1</span> Disable native popups(?) and bell&nbsp;<a class="hanchor" href="#disable-native-popups-----and-bell">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; not sure what this is about</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (setq-default indent-tabs-mode nil)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; disable popups?</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (setq pop-up-windows nil)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Disable bell sound</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ring-bell-function</span> <span class="ss">&#39;ignore</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="only-y-or-n-prompts-for-speed"><span class="section-num">14.2</span> Only <strong>y or n prompts</strong> for speed&nbsp;<a class="hanchor" href="#only-y-or-n-prompts-for-speed">#</a> </h3>
<p>Apparently there is a <code>short-answers</code> variable</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; (fset &#39;yes-or-no-p &#39;y-or-n-p)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq-default</span>
</span></span><span class="line"><span class="cl"> <span class="nv">use-short-answers</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1">;; Ok to visit non existent files (no confirmation reqd)</span>
</span></span><span class="line"><span class="cl"> <span class="nv">confirm-nonexistent-file-or-buffer</span> <span class="no">nil</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="merge-emacs-and-system-clipboards"><span class="section-num">14.3</span> Merge Emacs and system clipboards&nbsp;<a class="hanchor" href="#merge-emacs-and-system-clipboards">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; Merge system&#39;s and Emacs&#39; clipboard</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq-default</span> <span class="nv">select-enable-clipboard</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="overwrite-selected-text"><span class="section-num">14.4</span> Overwrite selected text&nbsp;<a class="hanchor" href="#overwrite-selected-text">#</a> </h3>
<p><a id="code-snippet--overwrite-active-region"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">delete-selection-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="join-line-to-following-line"><span class="section-num">14.5</span> Join line to following line&nbsp;<a class="hanchor" href="#join-line-to-following-line">#</a> </h3>
<p>Plagiarised from <a href="https://pragmaticemacs.com/emacs/join-line-to-following-line/">pragmatic emacs</a>. For the reverse, emacs has a
slightly obscurely named command <code>delete-indentation</code> which is bound
to <code>M-^</code> which can be rather useful. From the help for the function
(which you can always look up using <code>C-h k M-^</code> or <code>C-h f delete-indentation</code>)</p>
<p><a id="code-snippet--concatenate-following-line"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; join line to next line</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-j&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">                  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  <span class="p">(</span><span class="nv">join-line</span> <span class="mi">-1</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="simpler-kill-buffer-behaviour"><span class="section-num">14.6</span> Simpler kill buffer behaviour&nbsp;<a class="hanchor" href="#simpler-kill-buffer-behaviour">#</a> </h3>
<p><a id="code-snippet--buffer-killer"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/kill-this-buffer</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nf">kill-buffer</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-x k&#34;</span><span class="p">)</span> <span class="ss">&#39;peremacs/kill-this-buffer</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="kill-without-accessing-clipboard-reassess-if-this-is-really-necessary"><span class="section-num">14.7</span> Kill without accessing clipboard - reassess if this is really necessary&nbsp;<a class="hanchor" href="#kill-without-accessing-clipboard-reassess-if-this-is-really-necessary">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">peremacs/backward-kill-word</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;*&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">push-mark</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">backward-word</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">delete-region</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="p">(</span><span class="nv">mark</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;M-DEL&#34;</span><span class="p">)</span> <span class="ss">&#39;peremacs/backward-kill-word</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-DEL&#34;</span><span class="p">)</span> <span class="ss">&#39;peremacs/backward-kill-word</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="return-to-last-position-in-buffer"><span class="section-num">14.8</span> Return to last position in buffer&nbsp;<a class="hanchor" href="#return-to-last-position-in-buffer">#</a> </h3>
<p>Opens files at last position used. Something about this on <a href="https://www.emacswiki.org/emacs/SavePlace">Emacs Wiki</a></p>
<p><a id="code-snippet--save-place"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">save-place-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="prompt-before-closing-emacs"><span class="section-num">14.9</span> Prompt before closing Emacs&nbsp;<a class="hanchor" href="#prompt-before-closing-emacs">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; Confirm when killing Emacs</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">confirm-kill-emacs</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                           <span class="p">(</span><span class="nv">y-or-n-p-with-timeout</span> <span class="nv">prompt</span> <span class="mi">2</span> <span class="no">nil</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="prevent-angle-braces-from-throwing-errors"><span class="section-num">14.10</span> Prevent angle braces from throwing errors&nbsp;<a class="hanchor" href="#prevent-angle-braces-from-throwing-errors">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nf">modify-syntax-entry</span> <span class="sc">?&lt;</span> <span class="s">&#34;.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">modify-syntax-entry</span> <span class="sc">?&gt;</span> <span class="s">&#34;.&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="don-t-follow-symlinks"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">14.11</span> Don&rsquo;t follow symlinks&nbsp;<a class="hanchor" href="#don-t-follow-symlinks">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; don&#39;t follow symlinks? hopefully this solves the</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; `symbols function definition is void: org-file-name-concat&#39; error</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">vc-follow-symlinks</span> <span class="no">nil</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="code-utilities"><span class="section-num">15</span> Code utilities&nbsp;<a class="hanchor" href="#code-utilities">#</a> </h2>
<h3 id="templates-and-snippets-with-minad-s-tempel"><span class="org-todo todo TODO">TODO</span> <span class="section-num">15.1</span> Templates and snippets with minad&rsquo;s tempel&nbsp;<a class="hanchor" href="#templates-and-snippets-with-minad-s-tempel">#</a> </h3>
<p>Seems a lot simpler than yasnippet but will have to work on templates.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">tempel</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Require trigger prefix before template name when completing.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :custom</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (tempel-trigger-prefix &#34;&lt;&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;M-+&#34;</span> <span class="o">.</span> <span class="nv">tempel-complete</span><span class="p">)</span> <span class="c1">;; Alternative tempel-expand</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-*&#34;</span> <span class="o">.</span> <span class="nv">tempel-insert</span><span class="p">))</span>
</span></span></code></pre></div><p>Configuration: I&rsquo;m setting the <code>tempel-path</code> because it defaults to
<code>~/.config/emacs/templates</code> which I don&rsquo;t use. But I think I&rsquo;ll
eventually switch to something like that.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">tempel-path</span> <span class="s">&#34;~/.emacs.d/templates&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>Setup completion at point</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">tempel-setup-capf</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; Add the Tempel Capf to `completion-at-point-functions&#39;.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; `tempel-expand&#39; only triggers on exact matches. Alternatively use</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; `tempel-complete&#39; if you want to see all matches, but then you</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; should also configure `tempel-trigger-prefix&#39;, such that Tempel</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; does not trigger too often when you don&#39;t expect it. NOTE: We add</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; `tempel-expand&#39; *before* the main programming mode Capf, such</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; that it will be tried first.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq-local</span> <span class="nv">completion-at-point-functions</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nf">cons</span> <span class="nf">#&#39;</span><span class="nv">tempel-expand</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">completion-at-point-functions</span><span class="p">)))</span>
</span></span></code></pre></div><p>Hooks</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="nb">:hook</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">prog-mode</span> <span class="o">.</span> <span class="nv">tempel-setup-capf</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">text-mode</span> <span class="o">.</span> <span class="nv">tempel-setup-capf</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;; Optionally make the Tempel templates available to Abbrev,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; either locally or globally. `expand-abbrev&#39; is bound to C-x &#39;.</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; (add-hook &#39;prog-mode-hook #&#39;tempel-abbrev-mode)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;; (global-tempel-abbrev-mode)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span></code></pre></div><h3 id="snippets"><span class="section-num">15.2</span> Snippets&nbsp;<a class="hanchor" href="#snippets">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">yasnippet</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:disabled</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">yas-global-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span> <span class="nv">yas-minor-mode</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="syntax-checking-with-flycheck"><span class="section-num">15.3</span> Syntax checking with Flycheck&nbsp;<a class="hanchor" href="#syntax-checking-with-flycheck">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">flycheck</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">prog-mode</span> <span class="o">.</span> <span class="nv">flycheck-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">flycheck-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">sh-mode</span> <span class="o">.</span> <span class="nv">flycheck-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span> <span class="nv">flycheck-mode</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h3 id="bash-use-tabs-instead-of-spaces"><span class="section-num">15.4</span> Bash - use tabs instead of spaces&nbsp;<a class="hanchor" href="#bash-use-tabs-instead-of-spaces">#</a> </h3>
<p>Maybe this needs to be universal but this is especially annoying when
I edit void-packages &rsquo;template&rsquo;s which specifically need tabs in the
custom functions below.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;sh-mode-hook</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">setq-default</span> <span class="nv">indent-tabs-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">setq-default</span> <span class="nv">tab-width</span> <span class="mi">8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;write-file-functions</span> <span class="ss">&#39;delete-trailing-whitespace</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="auto-paired-parens"><span class="section-num">15.5</span> Auto-paired parens&nbsp;<a class="hanchor" href="#auto-paired-parens">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">electric-pair-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">electric-pair-preserve-balance</span> <span class="no">nil</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="show-matching-parens"><span class="section-num">15.6</span> Show matching parens&nbsp;<a class="hanchor" href="#show-matching-parens">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">show-paren-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; Worst possible setting with this theme - it sucks balls</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (setq show-paren-style &#39;expression)</span>
</span></span></code></pre></div><h3 id="cua-mode"><span class="section-num">15.7</span> CUA mode&nbsp;<a class="hanchor" href="#cua-mode">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">cua-enable-cua-keys</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; for rectangles, CUA is nice</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">cua-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="aggressive-indentation-coz-ocd"><span class="section-num">15.8</span> Aggressive <strong>indentation</strong> coz OCD&nbsp;<a class="hanchor" href="#aggressive-indentation-coz-ocd">#</a> </h3>
<p>&hellip;and I hate doing it manually and Emacs usually refuses to do it by
itself</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">aggressive-indent</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span> <span class="p">(</span><span class="nv">global-aggressive-indent-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span> <span class="nv">aggressive-indent-mode</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="bug-hunter"><span class="section-num">15.9</span> Bug-hunter&nbsp;<a class="hanchor" href="#bug-hunter">#</a> </h3>
<p>&hellip;except those that you can eat</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">bug-hunter</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="cl-libify"><span class="section-num">15.10</span> cl-libify&nbsp;<a class="hanchor" href="#cl-libify">#</a> </h3>
<p>Convert all (deperecated) <code>cl</code> symbols to <code>cl-lib</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">cl-libify</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:disabled</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="iedit"><span class="section-num">15.11</span> Iedit&nbsp;<a class="hanchor" href="#iedit">#</a> </h3>
<p>A more intuitive way to alter all the occurrences of a word/keyword at once</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">iedit</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="show-line-numbers-in-programming-modes"><span class="section-num">15.12</span> Show line numbers in programming modes&nbsp;<a class="hanchor" href="#show-line-numbers-in-programming-modes">#</a> </h3>
<p><a id="code-snippet--linum-for-progmode"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;prog-mode-hook</span>
</span></span><span class="line"><span class="cl">                <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;display-line-numbers-mode</span><span class="p">)</span> <span class="p">(</span><span class="nv">display-graphic-p</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">#&#39;</span><span class="nv">display-line-numbers-mode</span>
</span></span><span class="line"><span class="cl">                  <span class="nf">#&#39;</span><span class="nv">linum-mode</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="files-from-script-directories-default-to-shell-mode"><span class="section-num">15.13</span> Files from script directories default to shell-mode&nbsp;<a class="hanchor" href="#files-from-script-directories-default-to-shell-mode">#</a> </h3>
<p>Scope for adding more such shit?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;/bin/&#34;</span> <span class="o">.</span> <span class="nv">sh-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;/srcpkgs/[[:ascii:]]+/template&#34;</span> <span class="o">.</span> <span class="nv">sh-mode</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="editing-root-files-and-privelege-escalation-for-tramp-if-i-ever-use-it"><span class="section-num">15.14</span> Editing root files &amp; privelege escalation for TRAMP if I ever use it&nbsp;<a class="hanchor" href="#editing-root-files-and-privelege-escalation-for-tramp-if-i-ever-use-it">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">su</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (su-mode +1)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h3 id="whitespace-mopup"><span class="section-num">15.15</span> Whitespace mopup&nbsp;<a class="hanchor" href="#whitespace-mopup">#</a> </h3>
<p><a id="code-snippet--del-whitespace"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;before-save-hook</span>
</span></span><span class="line"><span class="cl">          <span class="ss">&#39;delete-trailing-whitespace</span><span class="p">)</span> <span class="c1">;; Delete trailing whitespace on save</span>
</span></span></code></pre></div><h3 id="multiple-cursors"><span class="section-num">15.16</span> Multiple cursors&nbsp;<a class="hanchor" href="#multiple-cursors">#</a> </h3>
<p>This is like <code>C-v</code>, a visual mode in vim/neovim. I stole this from
<a href="https://pragmaticemacs.com/emacs/multiple-cursors/">pragmatic emacs</a>.</p>
<p><a id="code-snippet--multiple-cursors"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c m c&#34;</span><span class="p">)</span> <span class="ss">&#39;peremacs/edit-lines</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="delete-blank-lines-and-whitespace-interactively"><span class="section-num">15.17</span> Delete blank lines and whitespace interactively&nbsp;<a class="hanchor" href="#delete-blank-lines-and-whitespace-interactively">#</a> </h3>
<p>Plagiarised from <a href="https://pragmaticemacs.com/emacs/delete-blank-lines-and-shrink-whitespace/">pragmatic emacs</a></p>
<p><a id="code-snippet--shrink-whitespace"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;M-SPC&#34;</span><span class="p">)</span> <span class="ss">&#39;shrink-whitespace</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="autoupdate-buffer-if-files-has-changed-on-disk"><span class="section-num">15.18</span> Autoupdate buffer if files has changed on disk&nbsp;<a class="hanchor" href="#autoupdate-buffer-if-files-has-changed-on-disk">#</a> </h3>
<p><a id="code-snippet--reload-buffer-on-modification"></a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">global-auto-revert-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="languages"><span class="section-num">16</span> Languages&nbsp;<a class="hanchor" href="#languages">#</a> </h2>
<h3 id="vimscript-for-editing-neovim-init"><span class="section-num">16.1</span> Vimscript for editing neovim init&nbsp;<a class="hanchor" href="#vimscript-for-editing-neovim-init">#</a> </h3>
<p>&hellip;cause neovim sucks and I don&rsquo;t like leaving Emacs in the ideal
case. I might end up replacing this with a <strong>lua config</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; vimrc syntax</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vimrc-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; :ensure t</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.vim\\(rc\\)?\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">vimrc-mode</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="lua-mode"><span class="section-num">16.2</span> Lua mode?&nbsp;<a class="hanchor" href="#lua-mode">#</a> </h3>
<p>I intend to learn and use lua for my neovim config.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">lua-mode</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="c-and-c-plus-plus"><span class="section-num">16.3</span> C and C++ ???&nbsp;<a class="hanchor" href="#c-and-c-plus-plus">#</a> </h3>
<p>Like really?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; (use-package cc-mode)</span>
</span></span></code></pre></div><h3 id="el-doc-for-help-in-echo-area"><span class="section-num">16.4</span> El Doc for help in echo area&nbsp;<a class="hanchor" href="#el-doc-for-help-in-echo-area">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">eldoc</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:straight</span> <span class="p">(</span><span class="nb">:type</span> <span class="nv">built-in</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:hook</span>
</span></span><span class="line"><span class="cl">  <span class="p">((</span><span class="nv">emacs-lisp-mode-hook</span> <span class="o">.</span> <span class="nv">eldoc-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">lisp-interaction-mode-hook</span> <span class="o">.</span> <span class="nv">eldoc-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">ielm-mode-hook</span> <span class="o">.</span> <span class="nv">eldoc-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">eldoc-mode</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="zig-mode"><span class="section-num">16.5</span> Zig mode&nbsp;<a class="hanchor" href="#zig-mode">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">zig-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.zig\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">zig-mode</span><span class="p">)))</span>
</span></span></code></pre></div><h3 id="yaml"><span class="section-num">16.6</span> Yaml&nbsp;<a class="hanchor" href="#yaml">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">yaml-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;autoloads</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.yml\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">yaml-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; indent and new-line on return; the mode enforces spaces instead</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; of tabs</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;yaml-mode-hook</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nf">define-key</span> <span class="nv">yaml-mode-map</span> <span class="s">&#34;\C-m&#34;</span> <span class="ss">&#39;newline-and-indent</span><span class="p">))))</span>
</span></span></code></pre></div><h2 id="terminal"><span class="section-num">17</span> Terminal&nbsp;<a class="hanchor" href="#terminal">#</a> </h2>
<p>Vterm ftw</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vterm</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; :ensure t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;/usr/lib/libvterm.so.0.0.3&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;  (setq vterm-term-environment-variable &#34;eterm-256color&#34;)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-disable-bold-font</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-kill-buffer-on-exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-module-cmake-args</span> <span class="s">&#34;-DUSE_SYSTEM_LIBVTERM=no&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-always-compile-module</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-copy-exclude-prompt</span> <span class="no">t</span><span class="p">))</span>
</span></span></code></pre></div><p>Make vterm behave like a guake terminal and open below the main
window. This can be toggled and opens only one instance per window
(afaik). Considering using <a href="https://github.com/jixiuf/vterm-toggle#vterm-toggle-use-dedicated-buffer">this feature</a> to not provide a dedicated
buffer to vterm so it sticks to the window it was launched with.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vterm-toggle</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="p">((</span><span class="s">&#34;C-M-&#39;&#34;</span> <span class="o">.</span> <span class="nv">vterm-toggle-cd</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; reset window layout after kill</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-toggle-reset-window-configration-after-exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; toggle behaviour - like a toggle keep it running</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-toggle-hide-method</span> <span class="no">nil</span><span class="p">)</span>
</span></span></code></pre></div><p>Show vterm in a window at the bottom</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">vterm-toggle-fullscreen-p</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;display-buffer-alist</span>
</span></span><span class="line"><span class="cl">         <span class="o">&#39;</span><span class="p">((</span><span class="nb">lambda</span><span class="p">(</span><span class="nv">bufname</span> <span class="nv">_</span><span class="p">)</span> <span class="p">(</span><span class="nb">with-current-buffer</span> <span class="nv">bufname</span> <span class="p">(</span><span class="nf">equal</span> <span class="nv">major-mode</span> <span class="ss">&#39;vterm-mode</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">display-buffer-reuse-window</span> <span class="nv">display-buffer-at-bottom</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;;(display-buffer-reuse-window display-buffer-in-direction)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;;display-buffer-in-direction/direction/dedicated is added in emacs27</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;;(direction . bottom)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">;;(dedicated . t) ;dedicated is supported in emacs27</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">reusable-frames</span> <span class="o">.</span> <span class="nv">visible</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">window-height</span> <span class="o">.</span> <span class="mf">0.3</span><span class="p">)))</span>
</span></span></code></pre></div><p>Make counsel use the correct function to yank in vterm buffers.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">vterm-counsel-yank-pop-action</span> <span class="p">(</span><span class="nv">orig-fun</span> <span class="kp">&amp;rest</span> <span class="nv">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">equal</span> <span class="nv">major-mode</span> <span class="ss">&#39;vterm-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">inhibit-read-only</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nv">yank-undo-function</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">_start</span> <span class="nv">_end</span><span class="p">)</span> <span class="p">(</span><span class="nv">vterm-undo</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">cl-letf</span> <span class="p">(((</span><span class="nf">symbol-function</span> <span class="ss">&#39;insert-for-yank</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">str</span><span class="p">)</span> <span class="p">(</span><span class="nv">vterm-send-string</span> <span class="nv">str</span> <span class="no">t</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nf">apply</span> <span class="nv">orig-fun</span> <span class="nv">args</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nf">apply</span> <span class="nv">orig-fun</span> <span class="nv">args</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">advice-add</span> <span class="ss">&#39;counsel-yank-pop-action</span> <span class="nb">:around</span> <span class="nf">#&#39;</span><span class="nv">vterm-counsel-yank-pop-action</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="multimedia"><span class="section-num">18</span> Multimedia&nbsp;<a class="hanchor" href="#multimedia">#</a> </h2>
<h3 id="emms-for-music"><span class="section-num">18.1</span> EMMS for music&nbsp;<a class="hanchor" href="#emms-for-music">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">emms</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:commands</span> <span class="nv">emms</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;emms-setup</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">emms-standard</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">emms-default-players</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">emms-mode-line-disable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-source-file-default-directory</span> <span class="s">&#34;~/Music/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;(dw/leader-key-def</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;;&#34;am&#34;  &#39;(:ignore t :which-key &#34;media&#34;)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;;&#34;amp&#34; &#39;(emms-pause :which-key &#34;play / pause&#34;)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;;&#34;amf&#34; &#39;(emms-play-file :which-key &#34;play file&#34;))</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><h3 id="view-epubs-and-pdfs-in-emacs"><span class="org-todo todo TODO">TODO</span> <span class="section-num">18.2</span> View ePubs and PDFs in Emacs&nbsp;<a class="hanchor" href="#view-epubs-and-pdfs-in-emacs">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">nov</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:mode</span> <span class="p">(</span><span class="s">&#34;\\.epub\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">nov-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span> <span class="p">(</span><span class="nv">nov-text-width</span> <span class="mi">75</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">pdf-tools</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:magic</span> <span class="p">(</span><span class="s">&#34;%PDF&#34;</span> <span class="o">.</span> <span class="nv">pdf-view-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:mode</span> <span class="p">(</span><span class="s">&#34;\\.pdf\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">pdf-view-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span> <span class="p">(</span><span class="nv">pdf-tools-install</span> <span class="nb">:no-query</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;; TODO this needs fixing idk why even</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; (use-package pdf-view</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :ensure nil</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :after pdf-tools</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :bind (:map pdf-view-mode-map</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;               (&#34;C-s&#34; . isearch-forward)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;               (&#34;d&#34; . pdf-annot-delete)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;               (&#34;h&#34; . pdf-annot-add-highlight-markup-annotation)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;               (&#34;t&#34; . pdf-annot-add-text-annotation))</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   :custom</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (pdf-view-display-size &#39;fit-page)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (pdf-view-resize-factor 1.1)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;   (pdf-view-use-unicode-ligther nil))</span>
</span></span></code></pre></div><h2 id="web"><span class="section-num">19</span> Web&nbsp;<a class="hanchor" href="#web">#</a> </h2>
<p>Got most of these from <a href="https://github.com/daviwil/dotfiles/blob/9776d65c4486f2fa08ec60a06e86ecb6d2c40085/Emacs.org">daviwil</a>&rsquo;s literate configuration</p>
<h3 id="gemini"><span class="section-num">19.1</span> Gemini&nbsp;<a class="hanchor" href="#gemini">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">elpher</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="mail-with-mu4e"><span class="org-todo todo TODO">TODO</span> <span class="section-num">19.2</span> mail with mu4e&nbsp;<a class="hanchor" href="#mail-with-mu4e">#</a> </h3>
<p>see <a href="https://github.com/daviwil/dotfiles/blob/9776d65c4486f2fa08ec60a06e86ecb6d2c40085/Mail.org">daviwil&rsquo;s mail.org</a> and the configuration in his <a href="https://github.com/daviwil/dotfiles/blob/9776d65c4486f2fa08ec60a06e86ecb6d2c40085/Emacs.org#mail">literate config</a>.</p>
<h3 id="browser"><span class="org-todo todo TODO">TODO</span> <span class="section-num">19.3</span> Browser&nbsp;<a class="hanchor" href="#browser">#</a> </h3>
<h3 id="elfeed-for-rss"><span class="section-num">19.4</span> Elfeed for RSS&nbsp;<a class="hanchor" href="#elfeed-for-rss">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">elfeed</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:commands</span> <span class="nv">elfeed</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">elfeed-feeds</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;https://drewdevault.com/blog/index.xml&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;https://sourcehut.org/blog/index.xml&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;https://ambikamath.com/feed/&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;https://emersion.fr/blog/atom.xml&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;https://popagandhi.com/index.xml&#34;</span><span class="p">)))</span>
</span></span></code></pre></div><h2 id="footer"><span class="section-num">20</span> Footer&nbsp;<a class="hanchor" href="#footer">#</a> </h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;;; configuration.el ends here</span>
</span></span></code></pre></div>
</article>

  <nav class="toc">
    <h4> Sections </h4>
    <nav id="TableOfContents">
  <ol>
    <li><a href="#other-init-files"><span class="section-num">1</span> Other init files</a>
      <ol>
        <li><a href="#early-init"><span class="section-num">1.1</span> Early init</a></li>
        <li><a href="#init-dot-el"><span class="section-num">1.2</span> init.el</a>
          <ol>
            <li><a href="#package-management"><span class="section-num">1.2.1</span> Package management</a>
              <ol>
                <li><a href="#setup-straight-dot-el"><span class="section-num">1.2.1.1</span> Setup <code>straight.el</code></a></li>
                <li><a href="#install-and-configure-use-package"><span class="section-num">1.2.1.2</span> Install and configure <code>use-package</code></a></li>
                <li><a href="#use-package-v2-related-changes"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">1.2.1.3</span> Use-package v2 related changes</a></li>
                <li><a href="#minimal-package-dot-el-setup-only-to-browse-packages"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">1.2.1.4</span> Minimal <code>package.el</code> setup only to browse packages</a></li>
              </ol>
            </li>
            <li><a href="#initial-org-mode-installation"><span class="section-num">1.2.2</span> Initial Org-mode installation</a></li>
            <li><a href="#end"><span class="section-num">1.2.3</span> End</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#header"><span class="section-num">2</span> Header</a></li>
    <li><a href="#prerequisites"><span class="section-num">3</span> Prerequisites</a>
      <ol>
        <li><a href="#reload-emacs-configuration"><span class="section-num">3.1</span> Reload Emacs configuration</a></li>
        <li><a href="#ensure-utf-8"><span class="section-num">3.2</span> Ensure UTF-8</a></li>
        <li><a href="#whoami"><span class="section-num">3.3</span> Whoami</a></li>
      </ol>
    </li>
    <li><a href="#writing"><span class="section-num">4</span> Writing</a>
      <ol>
        <li><a href="#org-mode"><span class="section-num">4.1</span> Org-mode</a>
          <ol>
            <li><a href="#refile"><span class="section-num">4.1.1</span> Refile</a></li>
            <li><a href="#fixed-pitch-for-everything-code"><span class="section-num">4.1.2</span> Fixed pitch for everything code</a></li>
            <li><a href="#quick-source-block-templates"><span class="section-num">4.1.3</span> Quick source block templates</a></li>
            <li><a href="#babel"><span class="org-todo todo TODO">TODO</span> <span class="section-num">4.1.4</span> Babel</a></li>
            <li><a href="#new-folding-backend"><span class="section-num">4.1.5</span> New folding backend</a></li>
            <li><a href="#sources-for-agenda-tasks"><span class="org-todo todo TODO">TODO</span> <span class="section-num">4.1.6</span> Sources for agenda tasks</a></li>
            <li><a href="#tags-and-todo-keywords-config"><span class="section-num">4.1.7</span> Tags and todo-keywords config</a>
              <ol>
                <li><a href="#todo-keywords"><span class="section-num">4.1.7.1</span> todo-keywords</a></li>
                <li><a href="#tags"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">4.1.7.2</span> tags</a></li>
              </ol>
            </li>
            <li><a href="#org-capture-and-agenda"><span class="section-num">4.1.8</span> Org-capture and agenda</a></li>
            <li><a href="#em-and-en-dashes"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">4.1.9</span> em- and en-dashes</a></li>
            <li><a href="#write-org-log-into-drawer"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">4.1.10</span> Write org-log into drawer</a></li>
            <li><a href="#backlinks-org-super-links"><span class="section-num">4.1.11</span> Backlinks / org-super-links</a></li>
            <li><a href="#display-features"><span class="section-num">4.1.12</span> Display features</a>
              <ol>
                <li><a href="#autoindent-autofill-turned-on-automatically"><span class="section-num">4.1.12.1</span> Autoindent/autofill turned on automatically</a></li>
                <li><a href="#minad-s-modern-ui-for-org-mode"><span class="section-num">4.1.12.2</span> Minad&rsquo;s modern UI for org-mode</a></li>
                <li><a href="#display-emphasis-markers-on-hover"><span class="section-num">4.1.12.3</span> Display emphasis markers on hover</a></li>
                <li><a href="#better-commenting-in-org-mode-code-blocks"><span class="section-num">4.1.12.4</span> Better commenting in org-mode code-blocks</a></li>
                <li><a href="#toc-for-org-mode-files"><span class="section-num">4.1.12.5</span> TOC for org-mode files</a></li>
                <li><a href="#convert-all-org-keywords-block-identifiers-to-lowercase"><span class="section-num">4.1.12.6</span> Convert all org-keywords/block identifiers to lowercase</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#auctex-for-latex-editing-plus-completion"><span class="section-num">4.2</span> AUCTex for LaTex editing + completion</a></li>
        <li><a href="#spellcheck"><span class="section-num">4.3</span> Spellcheck</a>
          <ol>
            <li><a href="#hunspell"><span class="section-num">4.3.1</span> Hunspell</a></li>
            <li><a href="#aspell-based-spellchecking"><span class="section-num">4.3.2</span> Aspell based spellchecking</a></li>
            <li><a href="#flyspell-correct-provides-a-more-refines-ui-for-spelling-checking"><span class="section-num">4.3.3</span> flyspell-correct provides a more refines UI for spelling checking</a></li>
          </ol>
        </li>
        <li><a href="#something-like-scrivener-from-mac"><span class="section-num">4.4</span> Something like scrivener from Mac</a></li>
        <li><a href="#blogging"><span class="section-num">4.5</span> Blogging</a>
          <ol>
            <li><a href="#ox-hugo-since-the-go-org-keep-wrecking-up-links"><span class="section-num">4.5.1</span> <code>ox-hugo</code> since the go-org keep wrecking up links</a>
              <ol>
                <li><a href="#blogging-flow"><span class="section-num">4.5.1.1</span> Blogging flow</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#olivetti-distraction-free-writing"><span class="section-num">4.6</span> Olivetti / distraction-free writing</a></li>
      </ol>
    </li>
    <li><a href="#work"><span class="section-num">5</span> Work</a>
      <ol>
        <li><a href="#emacs-speaks-statistics-for-r-and-python"><span class="section-num">5.1</span> Emacs Speaks Statistics for <strong>R</strong> and python(?)</a>
          <ol>
            <li><a href="#polymodes-for-r"><span class="org-todo todo TODO">TODO</span> <span class="section-num">5.1.1</span> Polymodes for R</a></li>
            <li><a href="#defining-org-skeleton-for-org-babel-plus-r"><span class="org-todo todo TODO">TODO</span> <span class="section-num">5.1.2</span> defining org-skeleton for org-babel + R</a></li>
          </ol>
        </li>
        <li><a href="#org-present-for-presentations"><span class="section-num">5.2</span> org-present for presentations</a></li>
        <li><a href="#citar-for-reference-management"><span class="org-todo todo TODO">TODO</span> <span class="section-num">5.3</span> Citar for reference management?</a></li>
      </ol>
    </li>
    <li><a href="#project-management-and-navigation-projectile"><span class="section-num">6</span> Project management and navigation - projectile</a></li>
    <li><a href="#denote-for-note-taking"><span class="section-num">7</span> Denote for note-taking</a>
      <ol>
        <li><a href="#basic-setup"><span class="section-num">7.1</span> Basic setup</a></li>
        <li><a href="#keeping-my-org-agenda-updated"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">7.2</span> Keeping my org-agenda updated</a></li>
        <li><a href="#denote-templates"><span class="org-todo todo TODO">TODO</span> <span class="section-num">7.3</span> Denote templates</a></li>
        <li><a href="#journaling-with-denote"><span class="section-num">7.4</span> Journaling with Denote</a></li>
        <li><a href="#convenience-commands-for-journal-entries"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">7.5</span> &ldquo;convenience commands&rdquo; for journal entries</a></li>
        <li><a href="#keybindings"><span class="org-todo todo TODO">TODO</span> <span class="section-num">7.6</span> Keybindings</a></li>
        <li><a href="#org-journal-for-journaling-requirements"><span class="org-todo todo TODO">TODO</span> <span class="section-num">7.7</span> <code>org-journal</code> for journaling requirements</a></li>
      </ol>
    </li>
    <li><a href="#version-control"><span class="section-num">8</span> Version control</a>
      <ol>
        <li><a href="#git-with-magit-and-gists-with-gist-dot-el"><span class="section-num">8.1</span> Git with Magit and gists with <code>gist.el</code></a></li>
        <li><a href="#undo-tree"><span class="section-num">8.2</span> Undo tree</a></li>
        <li><a href="#ssh-for-personal-packages-and-magit"><span class="org-todo todo TODO">TODO</span> <span class="section-num">8.3</span> SSH for personal packages and magit</a></li>
      </ol>
    </li>
    <li><a href="#minibuffer-completion"><span class="section-num">9</span> Minibuffer completion</a>
      <ol>
        <li><a href="#access-a-list-of-recently-edited-files"><span class="section-num">9.1</span> Access a list of recently edited files</a></li>
        <li><a href="#vertico-for-completions-ui"><span class="section-num">9.2</span> Vertico for completions UI</a>
          <ol>
            <li><a href="#vertico-extensions"><span class="org-todo todo TODO">TODO</span> <span class="section-num">9.2.1</span> Vertico extensions</a></li>
          </ol>
        </li>
        <li><a href="#orderless-completion"><span class="section-num">9.3</span> Orderless completion</a></li>
        <li><a href="#persistent-command-history"><span class="section-num">9.4</span> Persistent command history</a></li>
        <li><a href="#a-few-more-useful-configurations"><span class="section-num">9.5</span> A few more useful configurations</a></li>
        <li><a href="#richer-annotations-in-minubuffer"><span class="section-num">9.6</span> Richer annotations in minubuffer</a></li>
        <li><a href="#consult-adds-more-minibuffer-functionality"><span class="section-num">9.7</span> Consult adds more minibuffer functionality</a></li>
        <li><a href="#consult-interface-for-denote"><span class="org-todo todo TODO">TODO</span> <span class="section-num">9.8</span> Consult interface for denote</a></li>
        <li><a href="#embark-actions-reorganise"><span class="org-todo todo TODO">TODO</span> <span class="section-num">9.9</span> Embark - actions; reorganise</a></li>
      </ol>
    </li>
    <li><a href="#corfu-for-completion-in-buffer"><span class="section-num">10</span> Corfu for completion in buffer</a>
      <ol>
        <li><a href="#cape-extensions-for-corfu"><span class="section-num">10.1</span> CAPE - extensions for corfu</a></li>
      </ol>
    </li>
    <li><a href="#look"><span class="section-num">11</span> Look</a>
      <ol>
        <li><a href="#font-configuration"><span class="section-num">11.1</span> Font configuration</a>
          <ol>
            <li><a href="#setting-a-font"><span class="section-num">11.1.1</span> Setting a font</a></li>
            <li><a href="#line-spacing"><span class="section-num">11.1.2</span> Line spacing</a></li>
          </ol>
        </li>
        <li><a href="#editor-theme"><span class="section-num">11.2</span> Editor theme</a>
          <ol>
            <li><a href="#ef-themes"><span class="section-num">11.2.1</span> ef-themes</a></li>
            <li><a href="#modus-from-protesilaos"><span class="section-num">11.2.2</span> Modus from Protesilaos!</a></li>
            <li><a href="#commentary"><span class="section-num">11.2.3</span> Commentary</a></li>
            <li><a href="#my-themes"><span class="section-num">11.2.4</span> My themes</a></li>
            <li><a href="#unused"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5</span> unused</a>
              <ol>
                <li><a href="#wilmersdorf"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.1</span> Wilmersdorf</a></li>
                <li><a href="#tao"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.2</span> Tao</a></li>
                <li><a href="#expresso"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.3</span> Expresso</a></li>
                <li><a href="#github-dark"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.4</span> Github dark</a></li>
                <li><a href="#github-modern--light"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.5</span> Github modern (light)</a></li>
                <li><a href="#vale"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.6</span> Vale</a></li>
                <li><a href="#parchment"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.7</span> Parchment</a></li>
                <li><a href="#almost-mono"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.8</span> Almost mono</a></li>
                <li><a href="#stimmung-themes-for-nearly-monochrome-appearance"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">11.2.5.9</span> Stimmung themes for nearly monochrome appearance</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#highlighted-line-mode"><span class="section-num">11.3</span> Highlighted line-mode</a></li>
        <li><a href="#solid-window-dividers"><span class="section-num">11.4</span> Solid window dividers</a></li>
        <li><a href="#something-about-underlines"><span class="section-num">11.5</span> Something about underlines</a></li>
        <li><a href="#cursor-configuration"><span class="section-num">11.6</span> Cursor configuration</a></li>
        <li><a href="#line-number-format"><span class="section-num">11.7</span> Line-number format</a></li>
        <li><a href="#visual-not-audible-bell"><span class="section-num">11.8</span> Visual not audible bell</a></li>
        <li><a href="#no-tooltips"><span class="section-num">11.9</span> No Tooltips</a></li>
        <li><a href="#minibuffer-appearance"><span class="section-num">11.10</span> Minibuffer appearance?</a></li>
        <li><a href="#minimalist-and-ordered-mode-line"><span class="section-num">11.11</span> Minimalist and ordered mode-line</a>
          <ol>
            <li><a href="#mood-line-because-i-m-fucking-tired"><span class="section-num">11.11.1</span> Mood-line because I&rsquo;m fucking tired</a></li>
          </ol>
        </li>
        <li><a href="#pulse-to-locate-cursor-with-protesilaos-s-pulsar"><span class="section-num">11.12</span> Pulse to locate cursor with Protesilaos&rsquo;s pulsar</a></li>
        <li><a href="#display-complex-key-binding-suggestions"><span class="section-num">11.13</span> Display complex key-binding suggestions</a></li>
        <li><a href="#diminish-for-a-cleaner-modeline"><span class="section-num">11.14</span> Diminish for a cleaner modeline</a></li>
        <li><a href="#pixel-scroll-precision-mode--emacs-29-plus"><span class="section-num">11.15</span> Pixel scroll precision mode (Emacs 29+)</a></li>
        <li><a href="#make-emacs-the-window-title"><span class="section-num">11.16</span> Make &ldquo;Emacs&rdquo; the <strong>window title</strong></a></li>
        <li><a href="#make-scratch-buffer-and-minibuffer-blank"><span class="section-num">11.17</span> Make <strong>scratch</strong> buffer and <strong>minibuffer</strong> blank</a></li>
        <li><a href="#show-keystrokes"><span class="section-num">11.18</span> Show keystrokes</a></li>
      </ol>
    </li>
    <li><a href="#window-management"><span class="section-num">12</span> Window Management</a>
      <ol>
        <li><a href="#exwm"><span class="section-num">12.1</span> EXWM</a></li>
        <li><a href="#workspaces-with-perspective-el"><span class="section-num">12.2</span> Workspaces with perspective-el</a>
          <ol>
            <li><a href="#persp-projectile-for-proper-workspace-window-management"><span class="section-num">12.2.1</span> persp-projectile for proper workspace window management</a></li>
          </ol>
        </li>
        <li><a href="#undo-disrupted-window-frame-arrangement-after-using-some-shit"><span class="section-num">12.3</span> Undo disrupted window/frame arrangement after using some shit</a></li>
        <li><a href="#ace-window-helps-with-navigation-between-multiple-windows"><span class="section-num">12.4</span> Ace-window helps with navigation between multiple windows</a>
          <ol>
            <li>
              <ol>
                <li><a href="#other-actions-that-ace-window-handles"><span class="org-todo todo TODO">TODO</span> <span class="section-num">12.4.0.1</span> Other actions that <code>ace-window</code> handles:</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#sane-native-window-management"><span class="org-todo todo TODO">TODO</span> <span class="section-num">12.5</span> Sane native window management</a></li>
        <li><a href="#better-popups-with-popper"><span class="section-num">12.6</span> Better popups with popper</a></li>
      </ol>
    </li>
    <li><a href="#garbage"><span class="section-num">13</span> Garbage</a>
      <ol>
        <li>
          <ol>
            <li><a href="#from-customize-api"><span class="section-num">13.0.1</span> from customize API</a></li>
            <li><a href="#from-backups-and-autosaves"><span class="section-num">13.0.2</span> from backups and autosaves(?)</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#defaults"><span class="section-num">14</span> Defaults</a>
      <ol>
        <li><a href="#disable-native-popups-----and-bell"><span class="section-num">14.1</span> Disable native popups(?) and bell</a></li>
        <li><a href="#only-y-or-n-prompts-for-speed"><span class="section-num">14.2</span> Only <strong>y or n prompts</strong> for speed</a></li>
        <li><a href="#merge-emacs-and-system-clipboards"><span class="section-num">14.3</span> Merge Emacs and system clipboards</a></li>
        <li><a href="#overwrite-selected-text"><span class="section-num">14.4</span> Overwrite selected text</a></li>
        <li><a href="#join-line-to-following-line"><span class="section-num">14.5</span> Join line to following line</a></li>
        <li><a href="#simpler-kill-buffer-behaviour"><span class="section-num">14.6</span> Simpler kill buffer behaviour</a></li>
        <li><a href="#kill-without-accessing-clipboard-reassess-if-this-is-really-necessary"><span class="section-num">14.7</span> Kill without accessing clipboard - reassess if this is really necessary</a></li>
        <li><a href="#return-to-last-position-in-buffer"><span class="section-num">14.8</span> Return to last position in buffer</a></li>
        <li><a href="#prompt-before-closing-emacs"><span class="section-num">14.9</span> Prompt before closing Emacs</a></li>
        <li><a href="#prevent-angle-braces-from-throwing-errors"><span class="section-num">14.10</span> Prevent angle braces from throwing errors</a></li>
        <li><a href="#don-t-follow-symlinks"><span class="org-todo done DISABLED">DISABLED</span> <span class="section-num">14.11</span> Don&rsquo;t follow symlinks</a></li>
      </ol>
    </li>
    <li><a href="#code-utilities"><span class="section-num">15</span> Code utilities</a>
      <ol>
        <li><a href="#templates-and-snippets-with-minad-s-tempel"><span class="org-todo todo TODO">TODO</span> <span class="section-num">15.1</span> Templates and snippets with minad&rsquo;s tempel</a></li>
        <li><a href="#snippets"><span class="section-num">15.2</span> Snippets</a></li>
        <li><a href="#syntax-checking-with-flycheck"><span class="section-num">15.3</span> Syntax checking with Flycheck</a></li>
        <li><a href="#bash-use-tabs-instead-of-spaces"><span class="section-num">15.4</span> Bash - use tabs instead of spaces</a></li>
        <li><a href="#auto-paired-parens"><span class="section-num">15.5</span> Auto-paired parens</a></li>
        <li><a href="#show-matching-parens"><span class="section-num">15.6</span> Show matching parens</a></li>
        <li><a href="#cua-mode"><span class="section-num">15.7</span> CUA mode</a></li>
        <li><a href="#aggressive-indentation-coz-ocd"><span class="section-num">15.8</span> Aggressive <strong>indentation</strong> coz OCD</a></li>
        <li><a href="#bug-hunter"><span class="section-num">15.9</span> Bug-hunter</a></li>
        <li><a href="#cl-libify"><span class="section-num">15.10</span> cl-libify</a></li>
        <li><a href="#iedit"><span class="section-num">15.11</span> Iedit</a></li>
        <li><a href="#show-line-numbers-in-programming-modes"><span class="section-num">15.12</span> Show line numbers in programming modes</a></li>
        <li><a href="#files-from-script-directories-default-to-shell-mode"><span class="section-num">15.13</span> Files from script directories default to shell-mode</a></li>
        <li><a href="#editing-root-files-and-privelege-escalation-for-tramp-if-i-ever-use-it"><span class="section-num">15.14</span> Editing root files &amp; privelege escalation for TRAMP if I ever use it</a></li>
        <li><a href="#whitespace-mopup"><span class="section-num">15.15</span> Whitespace mopup</a></li>
        <li><a href="#multiple-cursors"><span class="section-num">15.16</span> Multiple cursors</a></li>
        <li><a href="#delete-blank-lines-and-whitespace-interactively"><span class="section-num">15.17</span> Delete blank lines and whitespace interactively</a></li>
        <li><a href="#autoupdate-buffer-if-files-has-changed-on-disk"><span class="section-num">15.18</span> Autoupdate buffer if files has changed on disk</a></li>
      </ol>
    </li>
    <li><a href="#languages"><span class="section-num">16</span> Languages</a>
      <ol>
        <li><a href="#vimscript-for-editing-neovim-init"><span class="section-num">16.1</span> Vimscript for editing neovim init</a></li>
        <li><a href="#lua-mode"><span class="section-num">16.2</span> Lua mode?</a></li>
        <li><a href="#c-and-c-plus-plus"><span class="section-num">16.3</span> C and C++ ???</a></li>
        <li><a href="#el-doc-for-help-in-echo-area"><span class="section-num">16.4</span> El Doc for help in echo area</a></li>
        <li><a href="#zig-mode"><span class="section-num">16.5</span> Zig mode</a></li>
        <li><a href="#yaml"><span class="section-num">16.6</span> Yaml</a></li>
      </ol>
    </li>
    <li><a href="#terminal"><span class="section-num">17</span> Terminal</a></li>
    <li><a href="#multimedia"><span class="section-num">18</span> Multimedia</a>
      <ol>
        <li><a href="#emms-for-music"><span class="section-num">18.1</span> EMMS for music</a></li>
        <li><a href="#view-epubs-and-pdfs-in-emacs"><span class="org-todo todo TODO">TODO</span> <span class="section-num">18.2</span> View ePubs and PDFs in Emacs</a></li>
      </ol>
    </li>
    <li><a href="#web"><span class="section-num">19</span> Web</a>
      <ol>
        <li><a href="#gemini"><span class="section-num">19.1</span> Gemini</a></li>
        <li><a href="#mail-with-mu4e"><span class="org-todo todo TODO">TODO</span> <span class="section-num">19.2</span> mail with mu4e</a></li>
        <li><a href="#browser"><span class="org-todo todo TODO">TODO</span> <span class="section-num">19.3</span> Browser</a></li>
        <li><a href="#elfeed-for-rss"><span class="section-num">19.4</span> Elfeed for RSS</a></li>
      </ol>
    </li>
    <li><a href="#footer"><span class="section-num">20</span> Footer</a></li>
  </ol>
</nav>
  </nav>
</main>

<footer>
  <div style="color: transparent">
    <a rel="me" href="https://fosstodon.org/@peregrinator"> </a>
    <a rel="me" href="https://mastodon.social/@peregrinator"> </a>
  </div>
  <br>

  The content for this site is
  <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a>.
  The <a href="https://git.sr.ht/~peregrinator/peregrinator.srht.site">source for this site</a>
  is <a href="https://opensource.org/licenses/MIT">MIT</a>.
</footer>

